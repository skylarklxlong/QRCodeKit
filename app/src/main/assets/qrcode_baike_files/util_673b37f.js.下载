(function (page){ var define = page.define; var require = page.require; define("wiki-mobile-common:widget/util/eventEmitter.js",function(e,t,n){!function(e){"use strict";function t(){}function r(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function i(e){return function(){return this[e].apply(this,arguments)}}function s(e){return"function"==typeof e||e instanceof RegExp?!0:e&&"object"==typeof e?s(e.listener):!1}var o=t.prototype,u=e.EventEmitter;o.getListeners=function(e){var t,n,r=this._getEvents();if(e instanceof RegExp){t={};for(n in r)r.hasOwnProperty(n)&&e.test(n)&&(t[n]=r[n])}else t=r[e]||(r[e]=[]);return t},o.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},o.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},o.addListener=function(e,t){if(!s(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),o="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===r(i[n],t)&&i[n].push(o?t:{listener:t,once:!1});return this},o.on=i("addListener"),o.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},o.once=i("addOnceListener"),o.defineEvent=function(e){return this.getListeners(e),this},o.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},o.removeListener=function(e,t){var n,i,s=this.getListenersAsObject(e);for(i in s)s.hasOwnProperty(i)&&(n=r(s[i],t),-1!==n&&s[i].splice(n,1));return this},o.off=i("removeListener"),o.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},o.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},o.manipulateListeners=function(e,t,n){var r,i,s=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=n.length;r--;)s.call(this,t,n[r]);else for(r in t)t.hasOwnProperty(r)&&(i=t[r])&&("function"==typeof i?s.call(this,r,i):o.call(this,r,i));return this},o.removeEvent=function(e){var t,n=typeof e,r=this._getEvents();if("string"===n)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},o.removeAllListeners=i("removeEvent"),o.emitEvent=function(e,t){var n,r,i,s,o,u=this.getListenersAsObject(e);for(s in u)if(u.hasOwnProperty(s))for(n=u[s].slice(0),i=0;i<n.length;i++)r=n[i],r.once===!0&&this.removeListener(e,r.listener),o=r.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,r.listener);return this},o.trigger=i("emitEvent"),o.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},o.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},o._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},o._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return e.EventEmitter=u,t},"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof n&&n.exports?n.exports=t:e.EventEmitter=t}(this||{})});})(window._SF_ ? _SF_.page : window.page);
;(function (page){ var define = page.define; var require = page.require; define("wiki-mobile-common:widget/util/nslog.js",function(i,e,o){if("https:"===window.location.protocol)var a="https://gsp0.baidu.com/8qUJcD3n0sgCo2Kml5_Y_D3/v.gif?pid=103";else var a="http://nsclick.baidu.com/v.gif?pid=103";var t={cfg:{summaryImgClick:20000101,contentImgClick:20000102,contentAlbumClick:20000103,summaryImgNewClick:20000104,roleImgClick:20000105,allImgClick:20000106,quickNavShow:20000201,quickNavClick:20000202,inlinkClick:20000301,inlinkUse:20000302,inlinkUseTitle:20000303,inlinkUseImg:20000304,inlinkUseSummary:20000305,inlinkUseBottom:20000306,basicInfoUnfold:20000401,basicInfoFold:20000402,basicInfoUnfoldBtnPV:20000403,seriesTop:20000501,seriesBottom:20000502,seriesSelect:20000503,seriesNext:20000504,logoClick:20000601,serachIconClick:20000701,searchUse:20000702,moreIconClick:20000801,loginBtnClick:20000802,shareBtnClick:20000803,settingBtnClick:20000804,logoutBtnClick:20000805,shareBtnInBoxClick:20000806,settingWifi:20000901,setting2g:20000902,setting3g:20000903,gotopBtnClick:20001001,tripGotopBtnClick:20001002,catalogBtnClick:20001101,catalogUse:20001102,tripCatalogBtnClick:20001103,tripPgcCatalogUse:20001104,tripUgcCatalogUse:20001105,polysemantShow:20001201,polysemantUnfold:20001202,polysemantUse:20001203,newsShow:20001301,newsUnfold:20001302,newsFold:20001303,newsDetailClick:20001304,flowerShow:20001401,flowerLoginClick:20001402,sendFlowerToLoginClick:20001403,sendFlowerSuccess:20001404,flowerIconClick:20001405,fScreen:20001501,fScreenInlink:20001502,turnPage:20001503,turnPageInlink:20001504,turnPageSuccess:20001505,turnPageInlinkSuccess:20001506,totalPV:20001507,totalFirstPV:20001508,moviePV:20001509,movieFirstPV:20001510,tripPV:20001511,tripFirstPV:20001512,lastScreenPV:20001513,youxuanShowPV:20001514,youxuanLastScreenPV:20001515,appPV:20001516,youxuanShowPVNoLoad:20001518,feedbackTopClick:20001601,feedbackBottomClick:20001602,yicheBrandShow:20001701,yicheBrandClick:20001702,yicheBrandPriceClick:20001703,yicheSubBrandShow:20001704,yicheSubBrandClick:20001705,yicheSubBrandPriceClick:20001706,shareWeibo:20001801,shareQQ:20001802,shareWeixin:20001803,movieFloatShareWeibo:20001804,movieFloatShareQQ:20001805,movieFloatShareWeixin:20001806,movieFixedShareWeibo:20001807,movieFixedShareQQ:20001808,movieFixedShareWeixin:20001809,tripFloatShareWeibo:20001810,tripFloatShareQQ:20001811,tripFloatShareWeixin:20001812,tripFixedShareWeibo:20001813,tripFixedShareQQ:20001814,tripFixedShareWeixin:20001815,oneMinShareWeibo:20001816,oneMinShareQQ:20001817,oneMinShareWeixin:20001818,gotoPcTopClick:20001901,gotoPcBottomClick:20001902,movieVideoShow:20002001,movieAlbumShow:20002002,movieVideoClick:20002003,movieAlbumClick:20002004,movieVideoTipShow:20002005,movieVideoTipClick:20002006,movieVideoQiyiClick:20002007,movieVideoLetvClick:20002008,movieTabActor:20002101,movieTopTabActor:20002102,movieTabPhoto:20002103,movieTopTabPhoto:20002104,movieTabComment:20002105,movieTopTabComment:20002106,movieTabVideo:20002107,movieSummaryShow:20002201,movieSummaryUnfoldClick:20002202,movieSummaryFoldClick:20002203,movieTicketShow:20002301,movieTicketClick:20002302,movieActorShow:20002401,movieActorAllClick:20002402,movieActorBtnClick:20002403,moviePhotoShow:20002501,moviePhotoAllClick:20002502,moviePhotoBtnClick:20002503,movieCommentShow:20002601,movieCommentAllClick:20002602,movieCommentBtnClick:20002603,movieCommentBaikeClick:20002604,movieCommentGewalaClick:20002605,movieCommentWeiboClick:20002606,movieLongCommentShow:20002607,movieShortCommentShow:20002608,movieLongCommentBtnClick:20002609,movieShortCommentBtnClick:20002610,tripFullviewShow:20002701,tripFullviewClick:20002702,tripSummaryImgClick:20002703,tripWeatherClick:20002704,tripSpotshotShow:20002705,tripSpotshotClick:20002706,tripSummaryUnfoldClick:20002707,tripSummaryFoldClick:20002708,tripAddressShow:20002801,tripAddressClick:20002802,tripBasicInfoUnfoldClick:20002901,tripBasicInfoFoldClick:20002902,tripTicketShow:20003001,tripTicketClick:20003002,tripPhotoShow:20003101,tripPhotoClick1:20003102,tripPhotoClick2:20003103,tripPhotoClick3:20003104,tripCommentShow:20003201,tripCommentBtnClick:20003202,tripCommentUnfoldClick:20003203,tripCommentFoldClick:20003204,tripCommentAllClick:20003205,onlineDurationWifi:20003301,onlineDuration3g:20003302,onlineDuration2g:20003303,yongchunFoldBtnClick:20003401,yongchunUnfoldBtnClick:20003402,yongchunShareBtnClick:20003403,yongchunApplyBtnClick:20003404,wangjunkaiReadTime:20003501,wangjunkaiShareClick:20003502,wangjunkaiFoldBtnClick:20003503,wangjunkaiPictureNext:20003504,wangjunkaiMusicPlay:20003505,wangjunkaiSoundPlay:20003506,wangjunkaiUnfoldBtnClick:20003507,baikeAppClick:20003601,baitongAppClick:20003602,appIndexClick:20003701,medicineShow:20003801,medicineBtnClick:20003802,wangyuanReadTime:20003901,wangyuanShareClick:20003902,wangyuanFoldBtnClick:20003903,wangyuanPictureNext:20003904,wangyuanMusicPlay:20003905,wangyuanSoundPlay:20003906,wangyuanUnfoldBtnClick:20003907,singleImageShow:20004001,singleImageClick:20004002,multiImageShow:20004003,multiImageClick:20004004,timelineShow:20004005,timelineClick:20004006,timelineShareBtnClick:20004007,singleVideoShow:20004008,singleVideoClick:20004009,singleVideoUnfold:20004010,singleVideoFold:20004011,relateVideoUnfold:20004012,relateVideoFold:20004013,relateVideoClick:20004014,yiyangqianxiReadTime:20004101,yiyangqianxiShareClick:20004102,yiyangqianxiFoldBtnClick:20004103,yiyangqianxiPictureNext:20004104,yiyangqianxiMusicPlay:20004105,yiyangqianxiSoundPlay:20004106,yiyangqianxiUnfoldBtnClick:20004107,themeShow:20004201,themeClick:20004202,movieVideoPartShow:20004301,movieVideoAllClick:20004302,movieVideoBtnClick:20004303,voiceSummaryShow:20004401,voiceSummaryClick:20004402,voiceSeriesShow:20004403,voiceSeriesClick:20004404,voiceSeriesPerClick:20004405,subpage:1,movieSubPageActorShareBtn:20100101,movieSubPageActorShareWeibo:20100201,movieSubPageActorShareQQ:20100202,movieSubPageActorShareWeixin:20100203,movieSubPageActorInlinkClick:20100301,movieSubPageActorInlinkUse:20100302,movieSubPageActorImgInlinkClick:20100303,movieSubPageActorWordInlinkClick:20100304,movieSubPageStagePhotoShareBtn:20200101,movieSubPageStagePhotoShareWeibo:20200201,movieSubPageStagePhotoShareQQ:20200202,movieSubPageStagePhotoShareWeixin:20200203,movieSubPageStagePhotoImgClick:20200301,tripSubPagePhotoShareBtn:20200102,tripSubPagePhotoShareWeibo:20200204,tripSubPagePhotoShareQQ:20200205,tripSubPagePhotoShareWeixin:20200206,tripSubPagePhotoImgClick:20200302,movieSubPageCommentShareBtn:20300101,movieSubPageCommentRecruitClick:20300102,movieSubPageLongCommentTabClick:20300103,movieSubPageShortCommentTabClick:20300104,movieSubPageCommentShareWeibo:20300201,movieSubPageCommentShareQQ:20300202,movieSubPageCommentShareWeixin:20300203,movieSubPageLongCommentClick:20300301,movieSubPageLongCommentShowAllClick:20300302,movieSubPageShortCommentTurnPage:20300303,movieSubPageBaikeLongCommentClick:20300304,movieSubPageGewalaLongCommentClick:20300305,movieSubPageWeiboLongCommentClick:20300306,movieSubPageLongCommentShareBtn:20400101,movieSubPageLongCommentShareWeibo:20400201,movieSubPageLongCommentShareQQ:20400202,movieSubPageLongCommentShareWeixin:20400203,movieSubPageVideoPV:21600101,movieSubPageVideoShareBtn:21600201,movieSubPageVideoClick:21600202,movieSubPageVideoShareWeibo:21600301,movieSubPageVideoShareQQ:21600302,movieSubPageVideoShareWeixin:21600303,opmSubPageSimgEssayPV:21300101,opmSubPageSimgEssayShareBtn:21300102,opmSubPageSimgEssayShareWeibo:21300103,opmSubPageSimgEssayShareQQ:21300104,opmSubPageSimgEssayShareWeixin:21300105,opmSubPageSimgEssayRelateLemmaClick:21300106,opmSubPageSimgEssayBackBtnClick:21300107,opmSubPageMimgEssayPV:21300201,opmSubPageMimgEssayShareBtn:21300202,opmSubPageMimgEssayShareWeibo:21300203,opmSubPageMimgEssayShareQQ:21300204,opmSubPageMimgEssayShareWeixin:21300205,opmSubPageMimgEssayRelateLemmaClick:21300206,opmSubPageMimgEssayBackBtnClick:21300207,opmSubPageTimeLineEssayPV:21300301,opmSubPageTimeLineEssayShareBtn:21300302,opmSubPageTimeLineEssayShareWeibo:21300303,opmSubPageTimeLineEssayShareQQ:21300304,opmSubPageTimeLineEssayShareWeixin:21300305,opmSubPageTimeLineEssayContentClick:21300306,opmSubPageTimeLineEssayBackBtnClick:21300307,vBaikeListPV:21700101,vBaikeListKnowledgeTurnPage:21700201,vBaikeListTuijieTurnPage:21700202,vBaikeListKnowledgeClick:21700301,vBaikeListTujieClick:21700302,vBaikeListShareBtnClick:21700303,vBaikeListBackBtnClick:21700304,vBaikeListBigTabClick:21700305,vBaikeListSmallTabClick:21700306,vBaikeListSmallTabShow:21700307,vBaikeListSmallTabHide:21700308,tujieImagePV:21800101,tujieImageShareBtnClick:21800201,tujieImagePVBottomShareBtnClick:21800202,tujieImageBackBtnClick:21800203,tujieImageRelateClick:21800204,tripimgview:1,tripImgViewShareBtnClick:20500101,tripImgViewDownloadBtnClick:20500102,tripImgViewLikeBtnClick:20500103,tripImgViewRealLikeBtnClick:20500104,tripImgViewGoLemmaBtnClick:20500105,tripImgViewGoAlbumBtnClick:20500106,tripImgViewTurnLeftBtnClick:20500107,tripImgViewTurnRightBtnClick:20500108,tripImgViewHandToRight:20500109,tripImgViewHandToLeft:20500110,tripImgViewFloatLayerShowOrHide:20500111,tripImgViewShareWeibo:20500201,tripImgViewShareQQ:20500202,tripImgViewShareWeixin:20500203,tripImgViewPV:20500301,tripImgViewTurnPagePV:20500302,tripTravelNotesPV:20500401,tripTravelNotesClick:20500402,tripTravelNotesBdPV:20500403,tripTravelNotesBdClick:20500404,activity:1,h5HeritagePV:20600101,h5HeritageLinkLemmaClick:20600201,h5HeritageShareBtnClick:20600202,h5HeritageShareToWeiboClick:20600301,h5HeritageShareToQQClick:20600302,h5HeritageShareToWechatClick:20600303,home:1,homePV:20700101,homeBaiduLinkClick:20700201,homeMoreProductClick:20700202,homeLoginBtnClick:20700203,homeUserHeadClick:20700204,homeSearchBtnClick:20700205,homeHotSpotClick:20700301,homeHotWordClick:20700401,homeTujieBaikeClick:20700501,homeBaikeMuseumClick:20700601,homeGoMuseumHomeClick:20700602,shijiSubject:1,shijiSubjectPV:20800101,shijiSubjectDuration:20800201,shijiSubjectMenuClick:20800901,shijiSubjectShareClick:20801001,shijiSubjectGoTopClick:20801101,h5ShijiSubjectShareToWeiboClick:20801301,h5ShijiSubjectShareToQQClick:20801302,h5ShijiSubjectShareToWechatClick:20801303,shijiSubjectGoDrawClick:20801401,shijiList:1,shijiListPV:20900101,shijiListDrawBtnClick:20900201,shijiListDrawBtnFloatClick:20900202,shijiListSeeSubjectBtnClick:20900301,shijiListHotTabClick:20900401,shijiListTimeTabClick:20900402,shijiListStarTabClick:20900403,shijiDrawShareBtnClick:20900501,shijiDrawShareToWeiboClick:20900601,shijiDrawShareToQQClick:20900602,shijiDrawShareToWechatClick:20900603,shijiDraw:1,shijiDrawPV:21000101,shijiDrawPublishBtnClick:21000201,shijiDrawSubmitBtnClick:21000301,shijiDrawBackBtnClick:21000401,imgview:1,imgViewPV:21100101,imgViewShareBtnClick:21100201,imgViewDownloadBtnClick:21100202,imgViewLikeBtnClick:21100203,imgViewRealLikeBtnClick:21100204,imgViewGoLemmaBtnClick:21100205,imgViewGoAlbumBtnClick:21100206,imgViewTurnLeftBtnClick:21100207,imgViewTurnRightBtnClick:21100208,imgViewHandToRight:21100209,imgViewHandToLeft:21100210,imgViewFloatLayerShowOrHide:21100211,imgViewShareWeibo:21100301,imgViewShareQQ:21100302,imgViewShareWeixin:21100303,imgViewTurnPagePV:9138,imgViewTurnAlbumPV:9153,album:1,albumPV:21200101,albumShareBtnClick:21200201,albumGoLemmaBtnClick:21200202,albumHideAlbumBtnClick:21200203,albumShowAlbumBtnClick:21200204,albumShareWeibo:21200301,albumShareQQ:21200302,albumShareWeixin:21200303,albumImgClick:21200401,theme:1,themePV:21400101,themeTopShare:21400201,themeBottomShare:21400202,themeToBottom:21400301,themeVideoShow:21400401,themeVideoClick:21400402,themeShareWeibo:21400501,themeShareQQ:21400502,themeShareWeixin:21400503,themeRelateClick:21400601,themeBackShow:21400701,themeBackClick:21400702,themeLogoShow:21400703,themeLogoClick:21400704,museum:1,museumShareBtn:21500101,museumShareWeibo:21500102,museumShareQQ:21500103,museumShareWeixin:21500104,museumBranchShareBtn:21500201,museumBranchShareWeibo:21500202,museumBranchShareQQ:21500203,museumBranchShareWeixin:21500204,museumExhibitShareBtn:21500301,museumExhibitShareWeibo:21500302,museumExhibitShareQQ:21500303,museumExhibitShareWeixin:21500304,lemmaAd:1,adPrevent:30000401,adAjaxError:30000402,youxuanLoad:30000403,youxuanLoadSuccess:30000404,youxuanLoadError:30000405,appLoad:30000406,appLoadSuccess:30000407,appLoadError:30000408,homeAd:1,homeAdPrevent:30100301,homeTopAdAjaxError:30100302,homeBottomAdAjaxError:30100303,end:1},qAll:function(i,e){if(!i)return!1;if(a.indexOf("https:")>-1&&(a=a.substr(0,11)+Math.floor(4*Math.random())+a.substr(12)),/^\d+$/.test(i))var o=(new Date).getTime(),t=window.location.href,n=[a,"url="+encodeURIComponent(t),"type="+i,"t="+o];else{if(!this.cfg[i])return!1;var o=(new Date).getTime(),t=window.location.href,n=[a,"url="+encodeURIComponent(t),"type="+this.cfg[i],"t="+o]}if(e)for(var m in e)e.hasOwnProperty(m)&&n.push(e[m]);this.imageReq(n.join("&"))},q:function(i){if(!i||!this.cfg[i])return!1;a.indexOf("https:")>-1&&(a=a.substr(0,11)+Math.floor(4*Math.random())+a.substr(12));var e=(new Date).getTime(),o=window.location.href,t=[a,"url="+encodeURIComponent(o),"type="+this.cfg[i],"t="+e];this.imageReq(t.join("&"))},qArray:function(i,e){if(!i||!this.cfg[i])return!1;a.indexOf("https:")>-1&&(a=a.substr(0,11)+Math.floor(4*Math.random())+a.substr(12));var o=(new Date).getTime(),t=window.location.href,n=[a,"url="+encodeURIComponent(t),"type="+this.cfg[i],"t="+o];if(e)for(var m in e)e.hasOwnProperty(m)&&n.push(e[m]);this.imageReq(n.join("&"))},q2:function(i,e){a.indexOf("https:")>-1&&(a=a.substr(0,11)+Math.floor(4*Math.random())+a.substr(12));var o=(new Date).getTime(),t=window.location.href,n=[a,"url="+encodeURIComponent(t),"type="+i,"t="+o];if(e)for(var m in e)e.hasOwnProperty(m)&&n.push(e[m]);this.imageReq(n.join("&"))},imageReq:function(i){page=window.page||{};var e="mbklog_"+(new Date).getTime(),o=page[e]=new Image;o.onload=o.onerror=function(){page[e]=null},o.src=i,o=null}};o.exports=t});})(window._SF_ ? _SF_.page : window.page);
;(function (page){ var define = page.define; var require = page.require; define("wiki-mobile-common:widget/util/baidubox.js",function(){!function(n,o){function e(n,o){return l.cleanObj.toString.call(n).slice(8,-1)===o}function t(n){var o=p[n];if(o)return o.exports;throw"module "+n+" is undefined"}function r(n,o){for(var e,r,i=n.split(":"),a=i.pop().split("/"),s=l;e=a.shift();)"bdbox"!==e&&(r=e,a.length&&(s=s[e]=s[e]||{}));var c=p[n]={exports:{}},u=l.isFunction(o)?o.apply(c,[t,c.exports,c,l]):o;u&&(c.exports=u),s[r]=c.exports}function i(){f.forEach(function(n){n()}),f.length=0,v=!0}function a(n){var o;return null==n?o=String(n):(o=Object.prototype.toString.call(n).toLowerCase(),o=o.substring(8,o.length-1)),o}function s(o){var e=o.success||g,t={imageUrl:"",mediaType:"all",title:"",content:"",linkUrl:location.href},r=o.error||g;return l.isFunction(o.success)&&(e="_xSHARE_SUCCESS_"+l.getId(),n[e]=o.success,t.success=e),l.isFunction(o.error)&&(r="_xSHARE_FAIL_"+l.getId(),n[r]=o.error,t.error=r),l.each(o,function(n,e){"success"!==e&&"error"!==e&&(e in h?e=h[e]:"content"!==e||o.title||(t.title=n),t[e]=n)}),l.isArray(t.mediaType)&&(t.mediaType="all"),n.BoxShareData||(n.BoxShareData={successcallback:e,errorcallback:r,options:t}),t}var c=+new Date,u=(c+"").slice(-3),d=navigator.userAgent,l={isBox:/ baiduboxapp\//i.test(d)&&!/ lite baiduboxapp/.test(d),$isBox:function(){var o=n.navigator||{},e=o.userAgent;return/ baiduboxapp\//i.test(e)&&!/ lite baiduboxapp/.test(e)},isLiteBox:/ lite baiduboxapp\//i.test(d),$isLiteBox:function(){var o=n.navigator||{},e=o.userAgent;return/ lite baiduboxapp\//i.test(e)},isInfoBox:/ info baiduboxapp\//i.test(d),$isInfoBox:function(){var o=n.navigator||{},e=o.userAgent;return/ info baiduboxapp\//i.test(e)},isIOS:/(iPhone|iPod|iPad)/.test(d),$isIOS:function(){var o=n.navigator||{};return/(iPhone|iPod|iPad)/.test(o.userAgent)},isAndroid:/(Android);?[\s\/]+([\d.]+)?/.test(d),$isAndroid:function(){var o=n.navigator||{};return/(Android);?[\s\/]+([\d.]+)?/.test(o.userAgent)},getId:function(){return u++},emptyArr:[],emptyFn:function(){},cleanObj:{},byId:function(n){return l.isString(n)?o.getElementById(n):n},toArray:function(n){return l.emptyArr.slice.call(n)},$:function(n,e){return e=e&&1===e.nodeType?e:o,l.toArray(e.querySelectorAll(n))}};"Function,String,Array,Number,RegExp".replace(/[^, ]+/g,function(n){l["is"+n]=function(o){return e(o,n)}}),l.isBoolean=function(n){return n===!0||n===!1},l.isObject=function(n){return"object"==typeof n},l.isUndefined=function(n){return void 0===n},l.isWindow=function(n){return null!=n&&n==n.window},l.isPlainObject=function(n){return l.isObject(n)&&!l.isWindow(n)&&Object.getPrototypeOf(n)==Object.prototype};var p={};l.define=r;var m=function(n,o,e){for(var t,r,i=n.split("."),a=e||m;t=i.shift();)"Box"!==t&&(r=t,i.length&&(a=a[t]=a[t]||{}));return a[r]=o||{},a[r]},f=[],v=!1;if(m.init=function(n){return"function"!=typeof n?this:(v?n():f.push(n),this)},"complete,loaded,interactive".indexOf(o.readyState)>-1&&o.body?i():o.addEventListener("DOMContentLoaded",i,!1),r("common:bdbox/utils/getVersion",function(o,e,t,r){var i=function(){var o=0;if(n.baiduboxapp_version)o=n.baiduboxapp_version;else if(r.$isBox()){var e,t=navigator.userAgent;(e=/([\d+.]+)_(?:diordna|enohpi)_/.exec(t))?(e=e[1].split("."),o=e.reverse().join(".")):(e=/baiduboxapp\/([\d+.]+)/.exec(t))&&(o=e[1])}return i=function(){return o},o};t.exports=i}),r("common:bdbox/utils/getLiteVersion",function(n,o,e,t){var r=function(){var n=0;if(t.$isLiteBox()||t.$isInfoBox()){var o,e=navigator.userAgent;(o=/baiduboxapp\/([\d+.]+)/.exec(e))&&(n=o[1])}return r=function(){return n},n};e.exports=r}),r("common:bdbox/utils/version_compare",function(n,o,e){var t=function(n,o){o+="",n+="";for(var e=n.split("."),t=o.split("."),r=0,i=Math.max(e.length,t.length);i>r;r++){if(e[r]&&!t[r]&&parseInt(e[r])>0||parseInt(e[r])>parseInt(t[r]))return 1;if(t[r]&&!e[r]&&parseInt(t[r])>0||parseInt(e[r])<parseInt(t[r]))return-1}return 0};e.exports=t}),r("common:bdbox/ios/invokeApp",function(e,t,r,i){r.exports=function(e,t,r){if(e&&i.$isBox()){var a=[];if(i.isFunction(t))r=t;else for(var s in t)a.push(s+"="+t[s]);if(i.isFunction(r)){var c="_bdbox_js_"+i.getId();n[c]=function(){r.apply(n,[].slice.call(arguments,0))},a.push("func="+c)}else r&&a.push("func="+r);a="baiduboxapp://"+e+"?"+a.join("&");var u=o.createElement("iframe");u.style.display="none",u.src=a;var d=o.body||o.getElementsByTagName("body")[0];d.appendChild(u),setTimeout(function(){d.removeChild(u),u=null},0)}}}),r("common:bdbox/android/invokeApp",function(o,e,t,r){function i(o,e,t){if(t&&!r.isArray(t)&&(t=Array.prototype.slice.call(arguments,0).slice(2)),n[o]&&n[o][e]){var i=n[o][e].apply(n[o],t);return{error:0,result:i,__from:"js"}}var d=c();if(s(d,4.8)>=0||s(u(),2)>=0){var l=a(o,e,t);return l=l?JSON.parse(l):{},l.__from="app",l}if("4.7.1"===d||"4.7"==d){var p=a(o,e,t);return{error:0,result:p,__from:"app4.7"}}return{error:200}}function a(o,e,t){if(!r.$isBox()&&!r.$isLiteBox()&&!r.$isInfoBox())return{error:201};if(!r.$isAndroid())return{error:202};var i={obj:o,func:e,args:t?t:[]};try{return n.prompt("BdboxApp:"+JSON.stringify(i))}catch(a){return{error:201}}}var s=o("common:bdbox/utils/version_compare"),c=o("common:bdbox/utils/getVersion"),u=o("common:bdbox/utils/getLiteVersion");t.exports=i}),r("common:bdbox/android/invokeLiteApp",function(o,e,t,r){function i(n,o,e){if(e&&!r.isArray(e)&&(e=Array.prototype.slice.call(arguments,0).slice(2)),!r.$isLiteBox()||!r.$isAndroid()||!r.isInfoBox())return{error:201};var t=a(n,o,e);return t=t?JSON.parse(t):{},t.__from="liteApp",t}function a(o,e,t){var r={obj:o,func:e,args:t?t:[]};try{return n.prompt("BdboxApp:"+JSON.stringify(r))}catch(i){return{error:201}}}t.exports=i}),r("common:bdbox/utils/detect",function(o,e,t,r){function i(o){var e={name:"unknown",version:0};this===n||this.os||(this.os=e),o=o||navigator.userAgent;var t={Weibo:/weibo/i,Wechat:/micromessenger\//i,QQ:/QQ\//};for(var r in t)t.hasOwnProperty(r)&&(e["is"+r]=t[r].test(o));e.isUC=o.match(/UC/)||n.ucweb||n.ucbrowser;var i=o.match(/Windows Phone ([\d.]+)/);if(i)return e.win10=!0,e.version=i[1],e.name="win10",e;var a=o.match(/(Android);?\s+([\d.]+)?/);if(a)return e.android=!0,e.version=a[2],e.name="android",e;var s=o.match(/(iPad).*OS\s([\d_]+)/),c=o.match(/(iPod)(.*OS\s([\d_]+))?/),u=!s&&o.match(/(iPhone\sOS)\s([\d_]+)/);return u&&!c?(e.ios=e.iphone=!0,e.version=u[2].replace(/_/g,"."),e.name="ios",e):s?(e.ios=e.ipad=!0,e.name="ios",e.version=s[2].replace(/_/g,"."),e):c?(e.name="ios",e.ios=e.ipod=!0,e.version=c[3]?c[3].replace(/_/g,"."):null,e):e}i.apply(r),t.exports=i}),r("common:bdbox/each",function(n,o,e){function t(n){var o;return null==n?o=String(n):(o=Object.prototype.toString.call(n).toLowerCase(),o=o.substring(8,o.length-1)),o}e.exports=function(n,o,e){if("object"==typeof n){var r,i,a=t(n);if(e=e||n,"array"===a||"arguments"===a||"nodelist"===a){for(r=0,i=n.length;i>r;r++)if(o.call(e,n[r],r,n)===!1)return}else for(r in n)if(n.hasOwnProperty(r)&&o.call(e,n[r],r,n)===!1)return}}}),r("common:bdbox/client/nativeShare",function(e,t,r,i){function a(o){var e={wechatIcon:location.protocol+"//m.baidu.com/static/search/logo300.png",type:"url",mediaType:"all",linkUrl:location.href,title:c.title,success:"console.log",error:"console.log"};i.each(o||{},function(n,o){e[o]=n}),e.image&&(e.imageUrl=e.image),e.iconUrl&&!e.imageUrl&&"url"===e.type&&(e.imageUrl=e.iconUrl);var t={};["success","error"].forEach(function(o){var r=o;i.isFunction(e[o])&&(r="_xSHARE_SUCCESS_"+i.getId(),n[r]=e[o]),t[o+"callback"]=r,delete e[o]}),t.options=e,t.options.imageUrl&&i.$isAndroid()&&s(i.version,"6.5")<0&&delete t.options.imageUrl,n.BoxShareData=t;var r=e.wechatIcon;if(/micromessenger\//i.test(navigator.userAgent)&&r&&r.length>20){var a=c.createElement("div");a.id="wa-generalevent-wx-logo",a.style.display="none",a.innerHTML='<img src="'+r+'"/>';var u=c.body.firstChild;u?c.body.insertBefore(a,u):c.body.appendChild(a)}}var s=e("common:bdbox/utils/version_compare"),c=o;r.exports=a}),r("common:bdbox/utils/ready",function(n,e,t){function r(){a.forEach(function(n){n()}),a.length=0,s=!0}function i(n){"function"==typeof n&&(s?n():a.push(n))}var a=[],s=!1;"complete,loaded,interactive".indexOf(o.readyState)>-1&&o.body?r():o.addEventListener("DOMContentLoaded",r,!1),t.exports=i}),l.version=l.utils.getVersion(),l.version_compare=l.utils.version_compare,each=l.each,l.nativeShare=l.client.nativeShare,l.type=a,l.canI=function(n,o,e){return l.version_compare(l.version,n)>=0?l.isFunction(o)&&o():l.isFunction(e)&&e(),l},r("common:bdbox/client/o2o",function(n,o,e,t){var r=n("common:bdbox/android/invokeApp"),i=n("common:bdbox/ios/invokeApp"),a=encodeURIComponent,s=n("common:bdbox/each"),c=t.$isAndroid()?function(n,o){t.isObject(n)&&(o=n,n=n.url,delete o.url);var e=["S.bdsb_light_start_url="+a(n)];if(t.isObject(o)){var i=o.min_v;delete o.min_v;var c={color:"i.extra_actionbar_color_id",appid:"S.bdsb_wallet_appid"};s(o,function(n,o){"color"===o&&(n=4278190080|parseInt("0x"+n)),o=c[o]||o,e.push(o+"="+n)})}e=e.join(";");var u={intent:"intent:#Intent;"+e+";end",min_v:i&&""!=i?i:"16783629",mode:"0"};o&&o.component&&""!=o.component||(u.class="com.baidu.searchbox.wallet.WalletServiceActivity"),r("Bdbox_android_utils","command",[JSON.stringify(u)])}:function(n,o){t.isObject(n)&&(o=n,n=n.url,delete o.url);var e={openurl:a(n),minver:"5.3.0.0",isla:0,opentype:1,append:0,rbtnstyle:2};if(t.isObject(o)){var r={color:"barcolor"};s(o,function(n,o){o=r[o]||o,e[o]=n})}e.appid&&(e.isla=1),i("easybrowse",e)};e.exports=c}),l.o2o=l.client.o2o,"android"===l.os.name?m("card",{query:function(n,o){if(m.version_compare(m.version,"5.0")<0)return this;var e,t;m.isArray(n)?e=[JSON.stringify(n)]:(t=m.toArray(arguments),o=t.pop(),m.isFunction(o)?e=t:(e=m.toArray(arguments),o=null),e=[JSON.stringify(e)]);var r=m.android.invokeApp("Bdbox_android_card","mquery",e);return r=0===r.error&&r.result?JSON.parse(r.result):!1,m.isFunction(o)&&o(r),r},add:function(o,e){if(m.version_compare(m.version,"5.0")<0)return this;var t,r;m.isString(o)?t=[o]:m.isArray(o)?t=[JSON.stringify(o)]:(r=m.toArray(arguments),e=r.pop(),m.isFunction(e)?t=r:(t=m.toArray(arguments),e=null),t=[JSON.stringify(t)]);var i=null;if(m.version_compare(m.version,"5.5")>=0){var a="";m.isFunction(e)&&(a="__box_card_"+m.getId(),n[a]=function(n){var o=JSON.parse(n),t=!1;for(var r in o){t=o[r].st;break}e(t)}),i=m.android.invokeApp("Bdbox_android_card","madd",t.concat([a,0]))}else i=m.android.invokeApp("Bdbox_android_card","madd",t);return i}}):m("card",{query:function(n,o){if(m.version_compare(m.version,"5.0")<0)return this;var e,t;m.isArray(n)?e=[JSON.stringify(n)]:(t=m.toArray(arguments),o=t.pop(),m.isFunction(o)?e=t:(e=m.toArray(arguments),o=null),e=[JSON.stringify(e)]);var r=function(n){m.isFunction(o)&&o(JSON.parse(n)),r=null};m.ios.invokeApp("cardMquery",{params:encodeURIComponent(e)},r)},add:function(n,o){if(m.version_compare(m.version,"5.0")<0)return this;var e,t;m.isString(n)?e=[n]:m.isArray(n)?e=[JSON.stringify(n)]:(t=m.toArray(arguments),o=t.pop(),m.isFunction(o)?e=t:(e=m.toArray(arguments),o=null),e=[JSON.stringify(e)]);var r=function(n){var e=JSON.parse(n),t=!1;for(var i in e){t=e[i].st;break}m.isFunction(o)&&o(t),r=null};return m.ios.invokeApp("cardMadd",{params:encodeURIComponent(e),gohome:"0"},r),!0}}),r("common:bdbox/utils/jsonToQuery",function(n,o,e,t){e.exports=function(n){if(t.isString(n))return n;var o=[];for(var e in n)o.push(e+"="+n[e]);return o.join("&")}}),r("common:bdbox/io/loadJS",function(e,t,r,i){function a(e,t,r){var a,u,d,l=o.createElement("script");i.isString(e)?(a=e,i.isFunction(t)&&(r=t,t=null)):(a=e.url,t=e.data,r=e.success,u=e.error||i.emptyFn,d=e.timeout),i.isObject(t)&&(t=c(t)),t&&(a+=(-1===a.indexOf("?")?"?":"&")+t),a=a.replace(/[&?]{1,2}/,"?");var p;/=\?/.test(a)&&(p="_box_jsonp"+i.getId(),a=a.replace(/=\?/,"="+p));var m=s();d=d||2e4,l.type="text/javascript",l.src=a;var f,v=!0,b=function(){p&&delete n[p],f&&clearTimeout(f),l.onload=l.onreadystatechange=l.onerror=null,l=null},h=function(){!l||l.readyState&&!/loaded|complete/.test(l.readyState)||(b(),v&&i.isFunction(r)&&r.apply(null,i.toArray(arguments)),v=!1)},g=function(n){b(),v&&u(n),v=!1};p&&(n[p]=h),f=setTimeout(function(){b(),v&&u("timeout"),v=!1},d),l.onload=l.onreadystatechange=l.onerror=h,l.onerror=g,m.appendChild(l)}function s(){return o.head||o.getElementsByTagName("head")[0]||o.documentElement}var c=e("common:bdbox/utils/jsonToQuery");i.emptyFn,r.exports=a}),r("common:bdbox/utils/queryToJson",function(n,o,e){e.exports=function(n){var o=n.split("?"),e=o[1]?o[1]:o[0],t=e.split("&"),r={};return t.forEach(function(n){if(n=n.split("="),n[0].length>0){var o="";try{o=decodeURIComponent(n[1])||""}catch(e){}r[n[0]]=o}}),r}}),r("common:bdbox/extend",function(n,o,e,t){function r(n,o,e){for(var t in o)e&&(i(o[t])||a(o[t]))?(i(o[t])&&!i(n[t])&&(n[t]={}),a(o[t])&&!a(n[t])&&(n[t]=[]),r(n[t],o[t],e)):c(o[t])||(n[t]=o[t])}var i=t.isPlainObject,a=t.isArray,s=t.isBoolean,c=t.isUndefined;e.exports=function(n){var o,e=t.emptyArr.slice.call(arguments,1);return s(n)&&(o=n,n=e.shift()),e.forEach(function(e){r(n,e,o)}),n}}),r("common:bdbox/utils/ready",function(n,e,t){function r(){a.forEach(function(n){n()}),a.length=0,s=!0}function i(n){"function"==typeof n&&(s?n():a.push(n))}var a=[],s=!1;"complete,loaded,interactive".indexOf(o.readyState)>-1&&o.body?r():o.addEventListener("DOMContentLoaded",r,!1),t.exports=i}),r("common:bdbox/utils/detect",function(o,e,t,r){function i(o){var e={name:"unknown",version:0};this===n||this.os||(this.os=e),o=o||navigator.userAgent;var t={Weibo:/weibo/i,Wechat:/micromessenger\//i,QQ:/QQ\//};for(var r in t)t.hasOwnProperty(r)&&(e["is"+r]=t[r].test(o));e.isUC=o.match(/UC/)||n.ucweb||n.ucbrowser;var i=o.match(/Windows Phone ([\d.]+)/);if(i)return e.win10=!0,e.version=i[1],e.name="win10",e;var a=o.match(/(Android);?\s+([\d.]+)?/);if(a)return e.android=!0,e.version=a[2],e.name="android",e;var s=o.match(/(iPad).*OS\s([\d_]+)/),c=o.match(/(iPod)(.*OS\s([\d_]+))?/),u=!s&&o.match(/(iPhone\sOS)\s([\d_]+)/);return u&&!c?(e.ios=e.iphone=!0,e.version=u[2].replace(/_/g,"."),e.name="ios",e):s?(e.ios=e.ipad=!0,e.name="ios",e.version=s[2].replace(/_/g,"."),e):c?(e.name="ios",e.ios=e.ipod=!0,e.version=c[3]?c[3].replace(/_/g,"."):null,e):e}i.apply(r),t.exports=i}),r("common:bdbox/schema",function(n,e,t,r){function i(n,e){if(!n)return void e(!0);if(e=e||r.emptyFn,!r.$isBox()&&r.$isIOS()&&c(s.version,"9.0")>=0)return void u(function(){a(n,e)});var t=Date.now(),i=o.createElement("IFRAME");i.src=n,i.style.position="absolute",i.style.left="-2000px",i.style.top="-1000px",i.style.width="1px",i.style.height="1px",i.style.webkitTransition="all 0.9s",i.style.transition="all 0.9s",o.body.appendChild(i);var d=function(){o.body.removeChild(i),e(Date.now()-t<1500?!0:!1)};i.addEventListener("webkitTransitionEnd",d,!1),i.addEventListener("transitionEnd",d,!1),setTimeout(function(){i.style.left="-1000px"},20)}function a(n,o){location.href=n,d&&clearTimeout(d),d=setTimeout(function(){o(!0)},3e3)}var s=n("common:bdbox/utils/detect")(),c=n("common:bdbox/utils/version_compare"),u=n("common:bdbox/utils/ready"),d=null;t.exports=i}),r("common:bdbox/monitor",function(o,e,t,r){var i=encodeURIComponent,a=function(n,o){n+=n.indexOf("?")<0?"?":"&",this.url=n,this.options=o};a.prototype.report=function(o){o=o||"";var e=new Image(1,1),t=[];if(r.isObject(o)){for(var a in o)t.push(a+"="+i(String(o[a])));o=t.join("&")}var s="_box_mt"+r.getId();n[s]=e,e.onload=e.onerror=e.onabort=function(){e.onload=e.onerror=e.onabort=null,n[s]=e=null};var c=this.url+o;return r.isFunction(this.options.customHandler)&&(c=this.options.customHandler(c)),e.src=c+"&_rnd="+Math.floor(2147483648*Math.random()),this},a.prototype.main=function(n,o){return n&&r.isFunction(this[n])&&this[n].apply(this,r.toArray(o||[])),this},t.exports=function(n,o){return new a(n,o)}}),r("common:bdbox/clone",function(n,o,e){var t=Object.prototype.toString,r=function(n,o,e){var t=0;for(var r in n)if(n.hasOwnProperty(r))if(e)o[r]=n[r];else if(o(r,n[r],t++))break},i=function(n){var o;switch(t.call(n)){case"[object Object]":o={},r(n,function(n,e){o[n]=i(e)});break;case"[object Array]":o=[],n.forEach(function(n){o.push(i(n))});break;default:o=n}return o};e.exports=i}),r("common:bdbox/monitor/pblog",function(o,e,t,r){var i=o("common:bdbox/monitor"),a=o("common:bdbox/extend"),s=o("common:bdbox/utils/queryToJson"),c=o("common:bdbox/utils/getVersion"),u=o("common:bdbox/clone"),d=s(location.search),l=navigator.userAgent,p=n.location.protocol;"http:"!==p&&(p="https:");var m=p+"//m.baidu.com/tcbox",f={service:"bdbox",action:"pblog",ctv:2,cen:"uid_ua_ut",data:{appid:"1",dataid:"2",actiontype:"1",actionid:"2",actiondata:{ref:d.ref||"",gmv:d.vmgdb||"",source:d.from||d.ref||"",boxVersion:c(),boxPlatform:l.match(/(iPad|iPhone|iPod)/gim)?"ios":"android"}}},v=encodeURIComponent;d.uid&&d.osname&&["osname","ua","ut","from","cfrom","uid","pkgname"].forEach(function(n){d[n]&&(f[n]=d[n])});var b,h=i(m,{customHandler:function(n){var o=[];if(b)for(var e in b)if(b.hasOwnProperty(e)){var t=b[e];r.isPlainObject(t)&&(t=JSON.stringify(t)),o.push(e+"="+v(t))}return o.length&&(n+=o.join("&")),n}});h.init=function(n,o){r.isPlainObject(o)&&(f=a(f,o)),f.data.cateid=n},h.pv=function(n,o){b=u(f);var e=b.data;e.actionid="1";var t={};return t.url=n||location.href,o&&(t.u=o),e.actiondata=a(e.actiondata,t),h.report()},h.event=function(n,o,e,t){if(!n)throw"monitor.tc.event need a evtName";if(r.isPlainObject(o)&&!e){var i={evtName:n};for(var s in o)i[s]=o[s]}else var i={evtName:n,evtType:o||"",evtTag:e||""};b=u(f);var c=b.data;return c.actionid="2",t&&(b.data.cateid=t),c.actiondata=a(c.actiondata,i),h.report()},t.exports=function(){h.main.apply(h,arguments)}}),r("common:bdbox/moplus",function(n,o,e,t){var r=(n("common:bdbox/utils/jsonToQuery"),n("common:bdbox/io/loadJS"),n("common:bdbox/utils/version_compare"),n("common:bdbox/monitor/pblog")),i=n("common:bdbox/schema"),a="com.baidu.searchbox",s="http://127.0.0.1:6259/",c="http://127.0.0.1:40310/",u="inapp_boxserver",d="https:"===location.protocol,l={isSendPv:!1,isHit:!1,parseUA:function(){var n,o,e=navigator.userAgent,t={uc:/UCBrowser\/(\S*) \S*/g,bd:/baidubrowser\/(\S*) \(Baidu/g,qq:/MQQBrowser\/(\S*) Mobile/g,chr:/Chrome\/(\S*) Mobile/g,qh:/360 Aphone Browser \((\S*)\)/g,sg:/SogouMobileBrowser\/(\S*)/g,mi:/MiuiBrowser\/(\S*)/g};for(var r in t){var i=t[r].exec(e);if(i){n=r,o=i[1];break}}return n=n?n:"other",o=o?o:"0",{t:n,v:o}},parseHost:function(){return p.curHost===c?1:0},sendEvt:function(n,o,e,t){this.isHit&&this.send(n,o,e,t)},send:function(n,o,e,t){var i=this.parseUA(),a=i.t,s=i.v,c=d?0:1,u=this.parseHost();r("event",[n,{evtType:o||"",brName:a,brVer:s,isHttp:c,isNew:u,source:e||"",intent:t||""}])},init:function(){this.isHit=Date.now()%100===1,r("init",[2])}},p=function(n,o,e){this.version="2.0",this.isHttps=d,this.curHost=e||"",this.newHost=c,this.oldHost=this.isHttps?c:s,this.MCMDF=o||u,this._infoFuncs=[],this._verFuncs=[],this.minVersion=n?n:0,this.pkgName=a,l.init()};p.prototype={constructor:p,setMcmdf:function(n){return this.MCMDF=n,this},setHost:function(){return this},getHost:function(){},api:function(n,o,e){return e({error:233}),this},getInfo:function(n){return n({error:233}),this},getHVersion:function(n){return n({error:233}),this},parseInfo:function(){return!1},schema:function(n,o){if(!n.intent)throw"schema intent is empty";n.mcmdf||(n.mcmdf=this.MCMDF);var e=function(){l.sendEvt("schema","success",n.source,n.intent),t.isFunction(o)&&o({error:0,from:"schema"})},r=function(){l.sendEvt("schema","fail",n.source,n.intent),t.isFunction(o)&&o({error:20,from:"schema"})},s=n.schema||"";if(n.intent&&!n.schema){var c=n.intent;-1==c.indexOf(a)&&(l.sendEvt("defaultPKGName","fail",n.source||"",n.intent),n.minver=n.minver?n.minver:"6.9.1")}s||(s="baiduboxapp://utils?action=sendIntent&params="+encodeURIComponent(JSON.stringify(n))+"&minver="+(n.minver?n.minver:"6.9")),i(s,function(n){n?r():e()})},sendIntent:function(n,o){return o({error:233}),this},request:function(n,o){return o({error:233}),this}},e.exports=function(n,o){return new p(n,o)},e.exports.Moplus=p}),l.version_compare(l.version,"5.3.5")>=0||l.$isLiteBox()||l.$isInfoBox()){var b,h={image:"imageUrl",url:"linkUrl",order:"mediaType"},g="";n[g]=l.emptyFn,l.isAndroid?(b=function(n){if(n.id&&l.byId(n.id)){var o=n.eventType||"touchstart";l.byId(n.id).addEventListener(o,function(){e(n)},!0)}var e=function(o){o=s(o||n);var e=o.error,t=o.success;o.iconUrl&&o.imageUrl&&delete o.imageUrl,l.android.invokeApp("Bdbox_android_utils","callShare",[JSON.stringify(o),t||"console.log",e||"console.log"])};return e},m("share",b)):(b=function(n){if(n.id&&l.byId(n.id)){var o=n.eventType||"touchstart";l.byId(n.id).addEventListener(o,function(){e(n)},!0)}var e=function(o){o=s(o||n);var e=o.error,t=o.success;o.iconUrl&&!o.imageUrl&&(o.imageUrl=o.iconUrl),o=JSON.stringify(o),l.ios.invokeApp("callShare",{options:encodeURIComponent(o),errorcallback:e||"console.log",successcallback:t||"console.log"})};return e},m("share",b))}else{var x=[],y=function(){m._socShare&&m._socShare.init?x.forEach(function(n){m._socShare.init(n)}):setTimeout(y,3e3)};l.io.loadJS("//m.baidu.com/static/searchbox/openjs/share.js?v=1.2",y);var S={source:"client_id",id:"dom_id",image:"pic_url",success:"afterRender"},b=function(n){var o={content:"",client_id:"ZVEpDSsmZ0qxa1gmgDAh1Fje",theme:"native",dom_id:"share",animate:!0,pic_url:"",url:encodeURIComponent(location.href)};return l.isObject(n)&&l.each(n,function(n,e){if(e in S&&(e=S[e]),"order"===e&&l.isArray(n)){var t=[];n.forEach(function(n){"email"===n&&(n="mail"),t.push(n)})}o[e]=n}),delete o.success,delete o.error,delete o.afterRender,"all"===o.order?o.order=["qqdenglu","sinaweibo","renren","kaixin","mail","sms"]:l.isString(o.order)&&(o.order=o.order.split(",")),m._socShare&&m._socShare.init?m._socShare.init(o):x.push(o),function(){m._socShare.ui._shareBtnClickHandler()}};m("share",b)}if(r("common:bdbox/distribute",function(n,o,e,t){var r=n("common:bdbox/schema");n("common:bdbox/utils/detect");var i=n("common:bdbox/each"),a=n("common:bdbox/moplus"),s=t.emptyFn,c={qqDownloadUrl:"http://a.app.qq.com/o/simple.jsp?pkgname=com.baidu.searchbox",androidDownloadUrl:"",iosDownloadUrl:"",iosFailCallback:s,androidFailCallback:s,iosSchema:"",androidSchema:"",androidIntent:"",inBoxCallback:s},u=function(n){var o=this;n&&i(c,function(o,e){n[e]=n[e]||o});var e=this.url=n.url;e&&""!==e?(this.androidIntent="intent://"+e.replace(/^http[s]?:\/\//,"")+"#Intent;scheme=http;action=com.baidu.searchbox.action.VIEW;category=android.intent.category.DEFAULT;end",this.iosSchema="baiduboxapp://easybrowse?openurl="+encodeURIComponent(e)+"&opentype=0&isla=0&append=0&minver=5.3.0.0"):["androidIntent","iosSchema","androidSchema"].forEach(function(e){o[e]=n[e]}),this.options=n,this.fail=function(){if(console.log(t.os.name+" fail"),t.isFunction(n[t.os.name+"FailCallback"])){var o=n[t.os.name+"FailCallback"]();if(t.isBoolean(o)&&!o)return}var e=n[t.os.name+"DownloadUrl"];e&&""!==e&&(location.href=n[t.os.name+"DownloadUrl"])},this.success=function(){return console.log(t.os.name+" success"),t.isFunction(n[t.os.name+"SuccessCallback"])?n[t.os.name+"SuccessCallback"]():void 0}};u.prototype.wechat=function(){var n=this.options;if(t.isFunction(n.wechatCallback)){var o=n.wechatCallback();if(t.isBoolean(o)&&!o)return}n.qqDownloadUrl&&""!==n.qqDownloadUrl&&(location.href=n.qqDownloadUrl)},u.prototype.run=function(){var n=this,o=(n.url,n.options);return t.os.isWechat?n.wechat():t.$isBox()&&t.isFunction(o.inBoxCallback)?o.inBoxCallback():void this.invoke()},u.prototype.invoke=function(){var n=this;if(t.os.android){var o=a();o.getHVersion(function(e){e?o.sendIntent(n.androidIntent,function(o){0==o.error?n.success():n.fail()},1e3):n.androidSchema?r(n.androidSchema,function(o){o?n.fail():n.success()}):n.fail()})}else r(n.iosSchema,function(o){o?n.fail():n.success()})},e.exports=function(n){return new u(n)}}),each(l,function(n,o){m[o]=n}),n.Box&&n.Box.$)for(var _ in m)n.Box[_]=n.Box[_]||m[_];else n.Box=m}(window,document)});})(window._SF_ ? _SF_.page : window.page);
;(function (page){ var define = page.define; var require = page.require; define("wiki-mobile-common:widget/util/tween.js",function(n,t,e){var u={linear:function(n,t,e,u,a){return u*t/a+e},easeInSine:function(n,t,e,u,a){return-u*Math.cos(t/a*(Math.PI/2))+u+e},easeOutSine:function(n,t,e,u,a){return u*Math.sin(t/a*(Math.PI/2))+e},easeInOutSine:function(n,t,e,u,a){return-u/2*(Math.cos(Math.PI*t/a)-1)+e},easeInQuad:function(n,t,e,u,a){return u*(t/=a)*t+e},easeOutQuad:function(n,t,e,u,a){return-u*(t/=a)*(t-2)+e},easeInOutQuad:function(n,t,e,u,a){return(t/=a/2)<1?u/2*t*t+e:-u/2*(--t*(t-2)-1)+e},easeInCubic:function(n,t,e,u,a){return u*(t/=a)*t*t+e},easeOutCubic:function(n,t,e,u,a){return u*((t=t/a-1)*t*t+1)+e},easeInOutCubic:function(n,t,e,u,a){return(t/=a/2)<1?u/2*t*t*t+e:u/2*((t-=2)*t*t+2)+e},easeInQuart:function(n,t,e,u,a){return u*(t/=a)*t*t*t+e},easeOutQuart:function(n,t,e,u,a){return-u*((t=t/a-1)*t*t*t-1)+e},easeInOutQuart:function(n,t,e,u,a){return(t/=a/2)<1?u/2*t*t*t*t+e:-u/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(n,t,e,u,a){return u*(t/=a)*t*t*t*t+e},easeOutQuint:function(n,t,e,u,a){return u*((t=t/a-1)*t*t*t*t+1)+e},easeInOutQuint:function(n,t,e,u,a){return(t/=a/2)<1?u/2*t*t*t*t*t+e:u/2*((t-=2)*t*t*t*t+2)+e},easeInExpo:function(n,t,e,u,a){return 0==t?e:u*Math.pow(2,10*(t/a-1))+e},easeOutExpo:function(n,t,e,u,a){return t==a?e+u:u*(-Math.pow(2,-10*t/a)+1)+e},easeInOutExpo:function(n,t,e,u,a){return 0==t?e:t==a?e+u:(t/=a/2)<1?u/2*Math.pow(2,10*(t-1))+e:u/2*(-Math.pow(2,-10*--t)+2)+e},easeInCirc:function(n,t,e,u,a){return-u*(Math.sqrt(1-(t/=a)*t)-1)+e},easeOutCirc:function(n,t,e,u,a){return u*Math.sqrt(1-(t=t/a-1)*t)+e},easeInOutCirc:function(n,t,e,u,a){return(t/=a/2)<1?-u/2*(Math.sqrt(1-t*t)-1)+e:u/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInBack:function(n,t,e,u,a,r){return void 0==r&&(r=1.70158),u*(t/=a)*t*((r+1)*t-r)+e},easeOutBack:function(n,t,e,u,a,r){return void 0==r&&(r=1.70158),u*((t=t/a-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(n,t,e,u,a,r){return void 0==r&&(r=1.70158),(t/=a/2)<1?u/2*t*t*(((r*=1.525)+1)*t-r)+e:u/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e},easeInElastic:function(n,t,e,u,a){var r=1.70158,i=0,o=u;if(0==t)return e;if(1==(t/=a))return e+u;if(i||(i=.3*a),o<Math.abs(u)){o=u;var r=i/4}else var r=i/(2*Math.PI)*Math.asin(u/o);return-(o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*a-r)*Math.PI/i))+e},easeOutElastic:function(n,t,e,u,a){var r=1.70158,i=0,o=u;if(0==t)return e;if(1==(t/=a))return e+u;if(i||(i=.3*a),o<Math.abs(u)){o=u;var r=i/4}else var r=i/(2*Math.PI)*Math.asin(u/o);return o*Math.pow(2,-10*t)*Math.sin(2*(t*a-r)*Math.PI/i)+u+e},easeInOutElastic:function(n,t,e,u,a){var r=1.70158,i=0,o=u;if(0==t)return e;if(2==(t/=a/2))return e+u;if(i||(i=.3*a*1.5),o<Math.abs(u)){o=u;var r=i/4}else var r=i/(2*Math.PI)*Math.asin(u/o);return 1>t?-.5*o*Math.pow(2,10*(t-=1))*Math.sin(2*(t*a-r)*Math.PI/i)+e:o*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*a-r)*Math.PI/i)*.5+u+e},easeInBounce:function(n,t,e,a,r){return a-u.easeOutBounce(n,r-t,0,a,r)+e},easeOutBounce:function(n,t,e,u,a){return(t/=a)<1/2.75?7.5625*u*t*t+e:2/2.75>t?u*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?u*(7.5625*(t-=2.25/2.75)*t+.9375)+e:u*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(n,t,e,a,r){return r/2>t?.5*u.easeInBounce(n,2*t,0,a,r)+e:.5*u.easeOutBounce(n,2*t-r,0,a,r)+.5*a+e}};e.exports=u});})(window._SF_ ? _SF_.page : window.page);
;(function (page){ var define = page.define; var require = page.require; define("wiki-mobile-common:widget/util/safeCall.js",function(i,o,t){var e=i("wiki-mobile-common:widget/lib/zepto/zepto.js");t.exports=function(i,o,t){"use strict";return i&&"function"==e.type(i)?i.apply("object"==e.type(t)?t:null,void 0!==o?[].concat(o):[]):void 0}});})(window._SF_ ? _SF_.page : window.page);
;(function (page){ var define = page.define; var require = page.require; define("wiki-mobile-common:widget/util/animation.js",function(t,n,e){function i(t){1==arguments.length&&"object"==o.type(arguments[0])?(this.duration=isNaN(parseInt(t.duration))?400:Math.abs(parseInt(t.duration)),this.delay=isNaN(parseInt(t.delay))?0:Math.abs(parseInt(t.delay)),this.easing="function"==o.type(t.easing)?t.easing:"function"==o.type(r[t.easing])?r[t.easing]:r.easeOutQuad,this.onStart="function"==o.type(t.onStart)?t.onStart:null,this.onStep="function"==o.type(t.onStep)?t.onStep:null,this.onComplete="function"==o.type(t.onComplete)?t.onComplete:null):(this.duration=isNaN(parseInt(arguments[0]))?400:Math.abs(parseInt(arguments[0])),this.delay=0,this.onStep="function"==o.type(arguments[1])?arguments[1]:null,this.easing=arguments[2]&&"function"==o.type(arguments[2])?arguments[2]:"function"==o.type(r[arguments[2]])?r[arguments[2]]:r.easeOutQuad,this.onComplete="function"==o.type(arguments[3])?arguments[3]:null),this.elapsedTime=0,this.progress=0,this.curDuration=0,this.hasAniStarted=!1,this.aniState="STOP",this.resume()}function a(){return i.apply(this,arguments[0])}var o=t("wiki-mobile-common:widget/lib/zepto/zepto.js"),r=t("wiki-mobile-common:widget/util/tween.js"),s=t("wiki-mobile-common:widget/util/safeCall.js"),u=["webkit","moz"],m=1e3/60,l=+new Date,p=window.performance&&"function"==o.type(window.performance.now),c={};if(c.raf=window.requestAnimationFrame,c.caf=window.cancelAnimationFrame,!c.raf)for(var d=0;d<u.length&&(c.raf=window[u+"RequestAnimationFrame"],c.caf=window[u+"CancelAnimationFrame"]||window[u+"CancelRequestAnimationFrame"],!c.raf);++d);c.raf&&p||(c.raf=function(t){return setTimeout(function(){t(p?window.performance.now():new Date-l)},m)}),c.caf||(c.caf=function(t){clearTimeout(t)}),i.prototype={constructor:i,stop:function(){return"PLAY"==this.aniState?(this.aniState=this.progress<1?"PAUSED":"STOP",this.elapsedTime=this.curDuration,c.caf.call(window,this.aniRollId),this.progress):void 0},resume:function(){if("PLAY"!=this.aniState){var t=this;this.aniState="PLAY",this.startTick=p?window.performance.now():new Date-l,this.elapsedTime>0&&(this.delay=0),(this.aniRoll=function(n){var e=n-t.startTick;e>=t.delay&&(t.hasAniStarted?(t.curDuration=t.elapsedTime+e-t.delay,t.curDuration<t.duration&&(t.progress=t.easing(null,t.curDuration,0,1,t.duration),s(t.onStep,t.progress,t))):(t.hasAniStarted=!0,s(t.onStart,0,t),s(t.onStep,0,t))),t.curDuration<t.duration?t.aniRollId=c.raf.call(window,t.aniRoll):(t.progress<1&&s(t.onStep,1,t),t.elapsedTime=0,t.curDuration=0,t.hasAniStarted=!1,t.progress=0,t.aniState="STOP",s(t.onComplete,1,t))})(this.startTick)}}},a.prototype=i.prototype,e.exports=function(){if(arguments.length<1)throw new Error("[Animation Exception]: No arguments.");return new a(arguments)}});})(window._SF_ ? _SF_.page : window.page);
;(function (page){ var define = page.define; var require = page.require; define("wiki-mobile-common:widget/util/checkCss.js",function(e,r,t){t.exports=function(e){var r=document.createElement("div"),t=["webkit","moz","o","ms"],n="";e=("string"==typeof e?e:"").replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()});for(var o=[e,e.replace(/-(\w)/g,function(e,r){return r.toUpperCase()})],i=0;i<t.length;++i){var c="-"+t[i]+"-"+e,a=c.replace(/-(\w)/g,function(e,r){return r.toUpperCase()});o.push(c,a)}for(var i=0;i<o.length;++i)if(o[i]in r.style){n=o[i];break}return n}});})(window._SF_ ? _SF_.page : window.page);
;(function (page){ var define = page.define; var require = page.require; define("wiki-mobile-common:widget/util/cookie.js",function(e,o,n){n.exports={read:function(e){var o="",n=e+"=";if(document.cookie.length>0){var i=document.cookie.indexOf(n);if(-1!=i){i+=n.length;var t=document.cookie.indexOf(";",i);-1==t&&(t=document.cookie.length),o=unescape(document.cookie.substring(i,t))}}return o},write:function(e,o,n,i){var t="",c="";null!=n&&(t=new Date((new Date).getTime()+36e5*n),t="; expires="+t.toGMTString()),null!=i&&(c=";path=/;domain="+i),document.cookie=e+"="+escape(o)+t+c}}});})(window._SF_ ? _SF_.page : window.page);
;(function (page){ var define = page.define; var require = page.require; define("wiki-mobile-common:widget/util/mix.js",function(e,i,t){var n=function(){var e={},i={},t=0,n=0,r=this,a=["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q"];a=a.concat(["r","s","t","u","v","w","x","y","z"]),a=a.concat(["A","B","C","D","E","F","G","H","I","J","K"]),a=a.concat(["L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]),this.mixed=function(){},this.getKey=function(i){return e[i]},this.mixedStyle=function(e){r.parseStyle(e)},this.insertStyle=function(e){var i=document.createElement("style");i.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(i)},this.mixedHtml=function(e){return e=e.replace(/class=[\'\"](.[^\'\"]*)[\'\"]/gi,function(e,i){return'class="'+r.encodeString(i)+'"'}),e=e.replace(/id=[\'\"](.[^\'\"]*)[\'\"]/gi,function(e,i){return'id="'+r.encodeString(i)+'"'}),e=e.replace(/href=[\'\"](.[^\'\"]*)[\'\"]/gi,function(e,n){return i[t++]=n,'onclick="Mixedor.mixedOpen(this,'+(t-1)+')"'})},this.mixedOpen=function(e,t){e.getAttribute("target")&&"_blank"===e.getAttribute("target")?window.open(i[t]):window.location.href=i[t]},this.encode=function(i){return e[i]||(e[i]=o(i)),e[i]};var o=function(e){for(var i=e.length,t=[],r=0;i>r;r++)t.push(a[Math.floor(54*Math.random())]);return t.join("")+n++};this.encodeString=function(e){var i=null;if(e.indexOf(":")>-1){var t=e.split(":")[1];i=e.split(":")[0].split(" ")}else i=e.split(" ");for(var n="",r=0;r<i.length;r++){var a=i[r],o=a.indexOf(".")>-1?".":a.indexOf("#")>-1?"#":"";a=a.replace(o,"");var d=this.encode(a);n+=o+d,r<i.length-1&&(n+=" ")}return e.indexOf(":")>-1&&(n+=":"+t),n},this.parseStyle=function(e){var i=[],t={},n=0,a=0,o=!1,d=function(e,d){var s=e,c=new Image;c.src=s;var p=function(){if(c.width>0||c.height>0){if(t[d]="padding-top:"+c.height/c.width*100+"%",n++,o&&a===n){for(var e=0;a>e;e++)i=i.replace("adapt-img"+e,t[e]);r.insertStyle(i)}}else setTimeout(p,40)};p()};for(var s in e){for(var c=s.split(" "),p="",l=0;l<c.length;l++)p+=c[l].indexOf(".")>-1||c[l].indexOf("#")>-1?this.encodeString(c[l]):c[l],p+=" ";i.push(p+"{");for(var u in e[s])"adapt-img"===u?(i.push("display: block;"),i.push("background-image:url("+e[s][u]+");"),i.push("background-size: cover;"),i.push("background-repeat: no-repeat;"),i.push("adapt-img"+a++ +";"),d(e[s][u],a-1)):"display"===u&&"flex"===e[s][u]?(i.push("display:-webkit-box;"),i.push("display:-moz-box;"),i.push("display:-webkit-flex;"),i.push("display:flex;")):i.push(e[s][u].indexOf("}")>-1?u+":"+e[s][u].split("}")[0]+";}":u+":"+e[s][u]+";");i.push("}")}if(i=i.join(""),o=!0,a===n){for(var l=0;a>l;l++)i=i.replace("adapt-img"+l,t[l]);r.insertStyle(i)}}};page.Mixedor=new n,window._SF_||(window.Mixedor=page.Mixedor),t.exports=page.Mixedor});})(window._SF_ ? _SF_.page : window.page);
;(function (page){ var define = page.define; var require = page.require; define("wiki-mobile-common:widget/util/promisePolyfill.js",function(e,n,t){!function(e){function n(){}function o(e,n){return function(){e.apply(n,arguments)}}function i(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],a(e,this)}function r(e,n){for(;3===e._state;)e=e._value;return 0===e._state?void e._deferreds.push(n):(e._handled=!0,void i._immediateFn(function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null===t)return void(1===e._state?f:u)(n.promise,e._value);var o;try{o=t(e._value)}catch(i){return void u(n.promise,i)}f(n.promise,o)}))}function f(e,n){try{if(n===e)throw new TypeError("A promise cannot be resolved with itself.");if(n&&("object"==typeof n||"function"==typeof n)){var t=n.then;if(n instanceof i)return e._state=3,e._value=n,void c(e);if("function"==typeof t)return void a(o(t,n),e)}e._state=1,e._value=n,c(e)}catch(r){u(e,r)}}function u(e,n){e._state=2,e._value=n,c(e)}function c(e){2===e._state&&0===e._deferreds.length&&i._immediateFn(function(){e._handled||i._unhandledRejectionFn(e._value)});for(var n=0,t=e._deferreds.length;t>n;n++)r(e,e._deferreds[n]);e._deferreds=null}function s(e,n,t){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof n?n:null,this.promise=t}function a(e,n){var t=!1;try{e(function(e){t||(t=!0,f(n,e))},function(e){t||(t=!0,u(n,e))})}catch(o){if(t)return;t=!0,u(n,o)}}var l=setTimeout;i.prototype["catch"]=function(e){return this.then(null,e)},i.prototype.then=function(e,t){var o=new this.constructor(n);return r(this,new s(e,t,o)),o},i.all=function(e){var n=Array.prototype.slice.call(e);return new i(function(e,t){function o(r,f){try{if(f&&("object"==typeof f||"function"==typeof f)){var u=f.then;if("function"==typeof u)return void u.call(f,function(e){o(r,e)},t)}n[r]=f,0===--i&&e(n)}catch(c){t(c)}}if(0===n.length)return e([]);for(var i=n.length,r=0;r<n.length;r++)o(r,n[r])})},i.resolve=function(e){return e&&"object"==typeof e&&e.constructor===i?e:new i(function(n){n(e)})},i.reject=function(e){return new i(function(n,t){t(e)})},i.race=function(e){return new i(function(n,t){for(var o=0,i=e.length;i>o;o++)e[o].then(n,t)})},i._immediateFn="function"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){l(e,0)},i._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)},i._setImmediateFn=function(e){i._immediateFn=e},i._setUnhandledRejectionFn=function(e){i._unhandledRejectionFn=e},"undefined"!=typeof t&&t.exports?t.exports=i:e.Promise||(e.Promise=i)}(this)});})(window._SF_ ? _SF_.page : window.page);
;(function (page){ var define = page.define; var require = page.require; define("wiki-mobile-common:widget/util/url.js",function(e,o,n){var t=e("wiki-mobile-common:widget/lib/zepto/zepto.js"),r={queryToJson:function(e,o){function n(e){var n=e;if(o)try{n=decodeURIComponent(e)}catch(t){}return n}e=(e||window.location.href.replace(window.location.hash,""))+"",o="boolean"==typeof o?o:!1;for(var r={},a=e.substr(e.lastIndexOf("?")+1).split("&"),i=0;i<a.length;++i)if(a[i]){var c=a[i].split("=");if(c.length>1){var s=c[0],u=c[1];null==r[s]?r[s]=n(u):(t.isArray(r[s])||(r[s]=[r[s]]),r[s].push(n(u)))}}return r},jsonToQuery:function(e,o){function n(e,n){var r;switch(t.type(n)){case"boolean":case"number":case"string":r=e+"="+(o?encodeURIComponent(n):n);break;case"regexp":r=e+"="+(o?encodeURIComponent(n.source):n.source);break;case"date":r=e+"="+n.getTime();break;case"array":r=[];for(var a=0;a<n.length;++a)/^boolean|number|string|regexp|date$/.test(t.type(n[a]))&&r.push(arguments.callee(e,n[a]));break;default:r=void 0}return r}o="boolean"==typeof o?o:!1;var r=[];return"object"===t.type(e)&&t.isPlainObject(e)&&t.each(e,function(e,o){var t=n(e,o);t&&(r=r.concat(t))}),r.join("&")},getQuery:function(e,o){e=e?e+"":"",o=o||window.location.href.replace(window.location.hash,"");var n=r.queryToJson(o);return n[e]||""},setQuery:function(e,o,n){var a="";if(e){var i,c={},s="";switch(t.type(e)){case"string":case"number":n=(n||window.location.href)+"",(e+="")&&(c[e]=o);break;case"object":n=(o||window.location.href)+"",c=e}/(#.+)$/i.test(n)&&(s=RegExp.$1,n=n.replace(s,"")),i=r.queryToJson(n),t.extend(i,c),t.each(c,function(e,o){null==o&&delete i[e]}),a=r.jsonToQuery(i)+s}return a}};n.exports=r});})(window._SF_ ? _SF_.page : window.page);
;(function (page){ var define = page.define; var require = page.require; define("wiki-mobile-common:widget/component/testElem/testElem.js",function(e,n,t){function r(e,n){if(!e||1!==e.nodeType)return{isValid:!1,reason:"elemNotExist"};var t=0;do{if(e){if(window.getComputedStyle)var r=window.getComputedStyle(e);else var r=e.currentStyle;if(r&&"NONE"==r.display.toUpperCase())var i=!0,o="elemCSSHidden";if(!i&&r&&("HIDDEN"==r.visibility.toUpperCase()||0===parseInt(r.opacity)||parseInt(r["z-index"])<0))var i=!0,o="elemCSSInvisible";if(i&&o)return{isValid:!1,reason:o}}e=e.parentNode,t++}while(!e||e==document||t>30);if(n)for(var a in n)if("function"==typeof n[a]&&n[a]())return{isValid:!1,reason:a};return{isValid:!0}}function i(e,n){return e?Array(n+1).join(e):""}var o=e("wiki-mobile-common:widget/lib/zepto/zepto.js"),a=e("wiki-mobile-common:widget/util/nslog.js"),l={test:function(e){var n={};for(var t in e){var i=e[t];n[t]=i&&!i.nodeType&&i.node?r(i.node,i.validations):r(i)}return n},log:function(e,n,t){var r=l.test(e);if(!n)return r;var i=l.jsonStringify(r);a.qArray(n,["blockInfo="+i,"page="+t])},encodeJSON:function(e){function n(e){return e.replace(/["\\\b\f\n\r\t]/g,function(e){return i[e]})}var t,r=/^string|number|boolean$/,i={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};return r.test(o.type(e))?t=n(e+""):o.isPlainObject(e)?(t={},o.each(e,function(e,r){t[n(e+"")]="string"==o.type(r)?n(r):r})):t=null,t},jsonStringify:function(e,n,t){function r(e,t){var r="",u=o.type(e),y=i(f,t);if(void 0===e||"function"==u)r=void 0;else if(null===e)r="null";else switch(u){case"string":r='"'+l.encodeJSON(e)+'"';break;case"number":r=isFinite(e)?e+"":"null";break;case"boolean":r=e+"";break;case"date":r='"'+(e.toJSON?e.toJSON():timeFormater.format(e,"yyyy-MM-ddTHH:mm:ss.fffZ",null,!0))+'"';break;case"array":for(var d="",p=0;p<e.length;++p){var m=n?n.call(e,p+"",e[p]):e[p];d+=i(f,t+1)+(void 0==m||"function"==o.type(m)?"null":arguments.callee(m,t+1))+","+c}d=d.substr(0,d.length-(c?2:1)),r="["+(d?c+d+c+y:"")+"]";break;default:var b=!0,d="";for(key in e){var v=key+"",m="object"==o.type(e[key])&&"function"==o.type(e[key].toJSON)?e[key].toJSON():e[key];m=n?n.call(e,v,m):m,a.test(o.type(key))&&e.hasOwnProperty(key)&&void 0!==m&&"function"!=o.type(m)&&(!s||~o.inArray(v,s))&&(b=!1,d+=i(f,t+1)+'"'+l.encodeJSON(key)+'":'+(f?" ":"")+arguments.callee(m,t+1)+","+c)}r=b?"{}":"{"+c+d.substr(0,d.length-(c?2:1))+c+y+"}"}return r}var a=/^string|number|boolean$/,e={"":e},s="array"==o.type(n)?o.map(n,function(e){return e+""}):null,n="function"==o.type(n)?n:null,u=o.type(t),f="number"==u?i(" ",Math.max(Math.min(t,10),0)):"string"==u?t.substr(0,10):null,c=f?"\n":"";return r(n?n.call(e,"",e[""]):e[""],0)}};t.exports=l});})(window._SF_ ? _SF_.page : window.page);
;(function (page){ var define = page.define; var require = page.require; define("wiki-mobile-common:widget/lib/jsmart/PHPJS.js",function(e,t,n){function r(){var e={};return e.XMLHttpRequest={},e.window={window:{},document:{lastModified:1388954399,getElementsByTagName:function(){return[]}},location:{href:""}},e.window.window=e.window,e.strtotime=function(e,t){function n(e,t,n){var r,a=c[t];"undefined"!=typeof a&&(r=a-i.getDay(),0===r?r=7*n:r>0&&"last"===e?r-=7:0>r&&"next"===e&&(r+=7),i.setDate(i.getDate()+r))}function r(e){var t=e.split(" "),r=t[0],a=t[1].substring(0,3),s=/\d+/.test(r),l="ago"===t[2],o=("last"===r?-1:1)*(l?-1:1);if(s&&(o*=parseInt(r,10)),u.hasOwnProperty(a)&&!t[1].match(/^mon(day|\.)?$/i))return i["set"+u[a]](i["get"+u[a]]()+o);if("wee"===a)return i.setDate(i.getDate()+7*o);if("next"===r||"last"===r)n(r,a,o);else if(!s)return!1;return!0}var a,s,l,o,i,c,u,g,p,_,f,d=!1;if(!e)return d;if(e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase(),s=e.match(/^(\d{1,4})([\-\.\/\:])(\d{1,2})([\-\.\/\:])(\d{1,4})(?:\s(\d{1,2}):(\d{2})?:?(\d{2})?)?(?:\s([A-Z]+)?)?$/),s&&s[2]===s[4])if(s[1]>1901)switch(s[2]){case"-":return s[3]>12||s[5]>31?d:new Date(s[1],parseInt(s[3],10)-1,s[5],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3;case".":return d;case"/":return s[3]>12||s[5]>31?d:new Date(s[1],parseInt(s[3],10)-1,s[5],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3}else if(s[5]>1901)switch(s[2]){case"-":return s[3]>12||s[1]>31?d:new Date(s[5],parseInt(s[3],10)-1,s[1],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3;case".":return s[3]>12||s[1]>31?d:new Date(s[5],parseInt(s[3],10)-1,s[1],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3;case"/":return s[1]>12||s[3]>31?d:new Date(s[5],parseInt(s[1],10)-1,s[3],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3}else switch(s[2]){case"-":return s[3]>12||s[5]>31||s[1]<70&&s[1]>38?d:(o=s[1]>=0&&s[1]<=38?+s[1]+2e3:s[1],new Date(o,parseInt(s[3],10)-1,s[5],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3);case".":return s[5]>=70?s[3]>12||s[1]>31?d:new Date(s[5],parseInt(s[3],10)-1,s[1],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3:s[5]<60&&!s[6]?s[1]>23||s[3]>59?d:(l=new Date,new Date(l.getFullYear(),l.getMonth(),l.getDate(),s[1]||0,s[3]||0,s[5]||0,s[9]||0)/1e3):d;case"/":return s[1]>12||s[3]>31||s[5]<70&&s[5]>38?d:(o=s[5]>=0&&s[5]<=38?+s[5]+2e3:s[5],new Date(o,parseInt(s[1],10)-1,s[3],s[6]||0,s[7]||0,s[8]||0,s[9]||0)/1e3);case":":return s[1]>23||s[3]>59||s[5]>59?d:(l=new Date,new Date(l.getFullYear(),l.getMonth(),l.getDate(),s[1]||0,s[3]||0,s[5]||0)/1e3)}if("now"===e)return null===t||isNaN(t)?(new Date).getTime()/1e3|0:0|t;if(!isNaN(a=Date.parse(e)))return a/1e3|0;if(i=t?new Date(1e3*t):new Date,c={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},u={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},p="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)",_="([+-]?\\d+\\s"+p+"|(last|next)\\s"+p+")(\\sago)?",s=e.match(new RegExp(_,"gi")),!s)return d;for(f=0,g=s.length;g>f;f++)if(!r(s[f]))return d;return i.getTime()/1e3},e.strftime=function(e,t){this.php_js=this.php_js||{},this.setlocale("LC_ALL",0);for(var n=this.php_js,r=function(e,t,n){for("undefined"==typeof n&&(n=10);parseInt(e,10)<n&&n>1;n/=10)e=t.toString()+e;return e.toString()},a=n.localeCategories.LC_TIME,s=n.locales,l=s[a].LC_TIME,o={a:function(e){return l.a[e.getDay()]},A:function(e){return l.A[e.getDay()]},b:function(e){return l.b[e.getMonth()]},B:function(e){return l.B[e.getMonth()]},C:function(e){return r(parseInt(e.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(e){return r(parseInt(this.G(e)/100,10),0)},G:function(e){var t=e.getFullYear(),n=parseInt(o.V(e),10),r=parseInt(o.W(e),10);return r>n?t++:0===r&&n>=52&&t--,t},H:["getHours","0"],I:function(e){var t=e.getHours()%12;return r(0===t?12:t,0)},j:function(e){var t=e-new Date(""+e.getFullYear()+"/1/1 GMT");t+=6e4*e.getTimezoneOffset();var n=parseInt(t/6e4/60/24,10)+1;return r(n,0,100)},k:["getHours","0"],l:function(e){var t=e.getHours()%12;return r(0===t?12:t," ")},m:function(e){return r(e.getMonth()+1,0)},M:["getMinutes","0"],p:function(e){return l.p[e.getHours()>=12?1:0]},P:function(e){return l.P[e.getHours()>=12?1:0]},s:function(e){return Date.parse(e)/1e3},S:["getSeconds","0"],u:function(e){var t=e.getDay();return 0===t?7:t},U:function(e){var t=parseInt(o.j(e),10),n=6-e.getDay(),a=parseInt((t+n)/7,10);return r(a,0)},V:function(e){var t=parseInt(o.W(e),10),n=new Date(""+e.getFullYear()+"/1/1").getDay(),a=t+(n>4||1>=n?0:1);return 53===a&&new Date(""+e.getFullYear()+"/12/31").getDay()<4?a=1:0===a&&(a=o.V(new Date(""+(e.getFullYear()-1)+"/12/31"))),r(a,0)},w:"getDay",W:function(e){var t=parseInt(o.j(e),10),n=7-o.u(e),a=parseInt((t+n)/7,10);return r(a,0,10)},y:function(e){return r(e.getFullYear()%100,0)},Y:"getFullYear",z:function(e){var t=e.getTimezoneOffset(),n=r(parseInt(Math.abs(t/60),10),0),a=r(t%60,0);return(t>0?"-":"+")+n+a},Z:function(e){return e.toString().replace(/^.*\(([^)]+)\)$/,"$1")},"%":function(){return"%"}},i="undefined"==typeof t?new Date:new Date("object"==typeof t?t:1e3*t),c={c:"locale",D:"%m/%d/%y",F:"%y-%m-%d",h:"%b",n:"\n",r:"locale",R:"%H:%M",t:"	",T:"%H:%M:%S",x:"locale",X:"locale"};e.match(/%[cDFhnrRtTxX]/);)e=e.replace(/%([cDFhnrRtTxX])/g,function(e,t){var n=c[t];return"locale"===n?l[t]:n});var u=e.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,function(e,t){var n=o[t];return"string"==typeof n?i[n]():"function"==typeof n?n(i):"object"==typeof n&&"string"==typeof n[0]?r(i[n[0]](),n[1]):t});return u},e.setlocale=function(e,t){var n="",r=[],a=0,s=this.window.document,l=function _(e){if(e instanceof RegExp)return new RegExp(e);if(e instanceof Date)return new Date(e);var t={};for(var n in e)t[n]="object"==typeof e[n]?_(e[n]):e[n];return t},o=function(e){return 1!==e?1:0},i=function(e){return e>1?1:0};try{this.php_js=this.php_js||{}}catch(c){this.php_js={}}var u=this.php_js;if(u.locales||(u.locales={},u.locales.en={LC_COLLATE:function(e,t){return e==t?0:e>t?1:-1},LC_CTYPE:{an:/^[A-Za-z\d]+$/g,al:/^[A-Za-z]+$/g,ct:/^[\u0000-\u001F\u007F]+$/g,dg:/^[\d]+$/g,gr:/^[\u0021-\u007E]+$/g,lw:/^[a-z]+$/g,pr:/^[\u0020-\u007E]+$/g,pu:/^[\u0021-\u002F\u003A-\u0040\u005B-\u0060\u007B-\u007E]+$/g,sp:/^[\f\n\r\t\v ]+$/g,up:/^[A-Z]+$/g,xd:/^[A-Fa-f\d]+$/g,CODESET:"UTF-8",lower:"abcdefghijklmnopqrstuvwxyz",upper:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"},LC_TIME:{a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %r %Z",p:["AM","PM"],P:["am","pm"],r:"%I:%M:%S %p",x:"%m/%d/%Y",X:"%r",alt_digits:"",ERA:"",ERA_YEAR:"",ERA_D_T_FMT:"",ERA_D_FMT:"",ERA_T_FMT:""},LC_MONETARY:{int_curr_symbol:"USD",currency_symbol:"$",mon_decimal_point:".",mon_thousands_sep:",",mon_grouping:[3],positive_sign:"",negative_sign:"-",int_frac_digits:2,frac_digits:2,p_cs_precedes:1,p_sep_by_space:0,n_cs_precedes:1,n_sep_by_space:0,p_sign_posn:3,n_sign_posn:0},LC_NUMERIC:{decimal_point:".",thousands_sep:",",grouping:[3]},LC_MESSAGES:{YESEXPR:"^[yY].*",NOEXPR:"^[nN].*",YESSTR:"",NOSTR:""},nplurals:o},u.locales.en_US=l(u.locales.en),u.locales.en_US.LC_TIME.c="%a %d %b %Y %r %Z",u.locales.en_US.LC_TIME.x="%D",u.locales.en_US.LC_TIME.X="%r",u.locales.en_US.LC_MONETARY.int_curr_symbol="USD ",u.locales.en_US.LC_MONETARY.p_sign_posn=1,u.locales.en_US.LC_MONETARY.n_sign_posn=1,u.locales.en_US.LC_MONETARY.mon_grouping=[3,3],u.locales.en_US.LC_NUMERIC.thousands_sep="",u.locales.en_US.LC_NUMERIC.grouping=[],u.locales.en_GB=l(u.locales.en),u.locales.en_GB.LC_TIME.r="%l:%M:%S %P %Z",u.locales.en_AU=l(u.locales.en_GB),u.locales.C=l(u.locales.en),u.locales.C.LC_CTYPE.CODESET="ANSI_X3.4-1968",u.locales.C.LC_MONETARY={int_curr_symbol:"",currency_symbol:"",mon_decimal_point:"",mon_thousands_sep:"",mon_grouping:[],p_cs_precedes:127,p_sep_by_space:127,n_cs_precedes:127,n_sep_by_space:127,p_sign_posn:127,n_sign_posn:127,positive_sign:"",negative_sign:"",int_frac_digits:127,frac_digits:127},u.locales.C.LC_NUMERIC={decimal_point:".",thousands_sep:"",grouping:[]},u.locales.C.LC_TIME.c="%a %b %e %H:%M:%S %Y",u.locales.C.LC_TIME.x="%m/%d/%y",u.locales.C.LC_TIME.X="%H:%M:%S",u.locales.C.LC_MESSAGES.YESEXPR="^[yY]",u.locales.C.LC_MESSAGES.NOEXPR="^[nN]",u.locales.fr=l(u.locales.en),u.locales.fr.nplurals=i,u.locales.fr.LC_TIME.a=["dim","lun","mar","mer","jeu","ven","sam"],u.locales.fr.LC_TIME.A=["dimanche","lundi","mardi","mercredi","jeudi","vendredi","samedi"],u.locales.fr.LC_TIME.b=["jan","fv","mar","avr","mai","jun","jui","ao","sep","oct","nov","dc"],u.locales.fr.LC_TIME.B=["janvier","fvrier","mars","avril","mai","juin","juillet","aot","septembre","octobre","novembre","dcembre"],u.locales.fr.LC_TIME.c="%a %d %b %Y %T %Z",u.locales.fr.LC_TIME.p=["",""],u.locales.fr.LC_TIME.P=["",""],u.locales.fr.LC_TIME.x="%d.%m.%Y",u.locales.fr.LC_TIME.X="%T",u.locales.fr_CA=l(u.locales.fr),u.locales.fr_CA.LC_TIME.x="%Y-%m-%d"),!u.locale){u.locale="en_US";var g="http://www.w3.org/1999/xhtml",p="http://www.w3.org/XML/1998/namespace";s.getElementsByTagNameNS&&s.getElementsByTagNameNS(g,"html")[0]?s.getElementsByTagNameNS(g,"html")[0].getAttributeNS&&s.getElementsByTagNameNS(g,"html")[0].getAttributeNS(p,"lang")?u.locale=s.getElementsByTagName(g,"html")[0].getAttributeNS(p,"lang"):s.getElementsByTagNameNS(g,"html")[0].lang&&(u.locale=s.getElementsByTagNameNS(g,"html")[0].lang):s.getElementsByTagName("html")[0]&&s.getElementsByTagName("html")[0].lang&&(u.locale=s.getElementsByTagName("html")[0].lang)}if(u.locale=u.locale.replace("-","_"),u.locale in u.locales||u.locale.replace(/_[a-zA-Z]+$/,"")in u.locales&&(u.locale=u.locale.replace(/_[a-zA-Z]+$/,"")),u.localeCategories||(u.localeCategories={LC_COLLATE:u.locale,LC_CTYPE:u.locale,LC_MONETARY:u.locale,LC_NUMERIC:u.locale,LC_TIME:u.locale,LC_MESSAGES:u.locale}),null===t||""===t)t=this.getenv(e)||this.getenv("LANG");else if("[object Array]"===Object.prototype.toString.call(t))for(a=0;a<t.length;a++){if(t[a]in this.php_js.locales){t=t[a];break}if(a===t.length-1)return!1}if("0"===t||0===t){if("LC_ALL"===e){for(n in this.php_js.localeCategories)r.push(n+"="+this.php_js.localeCategories[n]);return r.join(";")}return this.php_js.localeCategories[e]}if(!(t in this.php_js.locales))return!1;if("LC_ALL"===e)for(n in this.php_js.localeCategories)this.php_js.localeCategories[n]=t;else this.php_js.localeCategories[e]=t;return t},e.getenv=function(e){return this.php_js&&this.php_js.ENV&&this.php_js.ENV[e]?this.php_js.ENV[e]:!1},e.rawurlencode=function(e){return e=(e+"").toString(),encodeURIComponent(e).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")},e.rawurldecode=function(e){return decodeURIComponent((e+"").replace(/%(?![\da-f]{2})/gi,function(){return"%25"}))},e.bin2hex=function(e){var t,n,r,a="";for(e+="",t=0,n=e.length;n>t;t++)r=e.charCodeAt(t).toString(16),a+=r.length<2?"0"+r:r;return a},e.ord=function(e){var t=e+"",n=t.charCodeAt(0);if(n>=55296&&56319>=n){var r=n;if(1===t.length)return n;var a=t.charCodeAt(1);return 1024*(r-55296)+(a-56320)+65536}return n>=56320&&57343>=n?n:n},e.sprintf=function(){var e=/%%|%(\d+\$)?([-+\'#0 ]*)(\*\d+\$|\*|\d+)?(\.(\*\d+\$|\*|\d+))?([scboxXuideEfFgG])/g,t=arguments,n=0,r=t[n++],a=function(e,t,n,r){n||(n=" ");var a=e.length>=t?"":new Array(1+t-e.length>>>0).join(n);return r?e+a:a+e},s=function(e,t,n,r,s,l){var o=r-e.length;return o>0&&(e=n||!s?a(e,r,l,n):e.slice(0,t.length)+a("",o,"0",!0)+e.slice(t.length)),e},l=function(e,t,n,r,l,o,i){var c=e>>>0;return n=n&&c&&{2:"0b",8:"0",16:"0x"}[t]||"",e=n+a(c.toString(t),o||0,"0",!1),s(e,n,r,l,i)},o=function(e,t,n,r,a,l){return null!=r&&(e=e.slice(0,r)),s(e,"",t,n,a,l)},i=function(e,r,i,c,u,g,p){var _,f,d,h,m;if("%%"===e)return"%";for(var E=!1,C="",T=!1,S=!1,y=" ",M=i.length,w=0;i&&M>w;w++)switch(i.charAt(w)){case" ":C=" ";break;case"+":C="+";break;case"-":E=!0;break;case"'":y=i.charAt(w+1);break;case"0":T=!0,y="0";break;case"#":S=!0}if(c=c?"*"===c?+t[n++]:"*"==c.charAt(0)?+t[c.slice(1,-1)]:+c:0,0>c&&(c=-c,E=!0),!isFinite(c))throw new Error("sprintf: (minimum-)width must be finite");switch(g=g?"*"===g?+t[n++]:"*"==g.charAt(0)?+t[g.slice(1,-1)]:+g:"fFeE".indexOf(p)>-1?6:"d"===p?0:void 0,m=r?t[r.slice(0,-1)]:t[n++],p){case"s":return o(String(m),E,c,g,T,y);case"c":return o(String.fromCharCode(+m),E,c,g,T);case"b":return l(m,2,S,E,c,g,T);case"o":return l(m,8,S,E,c,g,T);case"x":return l(m,16,S,E,c,g,T);case"X":return l(m,16,S,E,c,g,T).toUpperCase();case"u":return l(m,10,S,E,c,g,T);case"i":case"d":return _=+m||0,_=Math.round(_-_%1),f=0>_?"-":C,m=f+a(String(Math.abs(_)),g,"0",!1),s(m,f,E,c,T);case"e":case"E":case"f":case"F":case"g":case"G":return _=+m,f=0>_?"-":C,d=["toExponential","toFixed","toPrecision"]["efg".indexOf(p.toLowerCase())],h=["toString","toUpperCase"]["eEfFgG".indexOf(p)%2],m=f+Math.abs(_)[d](g),s(m,f,E,c,T)[h]();default:return e}};return r.replace(e,i)},e.html_entity_decode=function(e,t){var n={},r="",a="",s="";if(a=e.toString(),!1===(n=this.get_html_translation_table("HTML_ENTITIES",t)))return!1;delete n["&"],n["&"]="&amp;";for(r in n)s=n[r],a=a.split(s).join(r);return a=a.split("&#039;").join("'")},e.get_html_translation_table=function(e,t){var n,r={},a={},s={},l={},o={},i={};if(s[0]="HTML_SPECIALCHARS",s[1]="HTML_ENTITIES",l[0]="ENT_NOQUOTES",l[2]="ENT_COMPAT",l[3]="ENT_QUOTES",o=isNaN(e)?e?e.toUpperCase():"HTML_SPECIALCHARS":s[e],i=isNaN(t)?t?t.toUpperCase():"ENT_COMPAT":l[t],"HTML_SPECIALCHARS"!==o&&"HTML_ENTITIES"!==o)throw new Error("Table: "+o+" not supported");r[38]="&amp;","HTML_ENTITIES"===o&&(r[160]="&nbsp;",r[161]="&iexcl;",r[162]="&cent;",r[163]="&pound;",r[164]="&curren;",r[165]="&yen;",r[166]="&brvbar;",r[167]="&sect;",r[168]="&uml;",r[169]="&copy;",r[170]="&ordf;",r[171]="&laquo;",r[172]="&not;",r[173]="&shy;",r[174]="&reg;",r[175]="&macr;",r[176]="&deg;",r[177]="&plusmn;",r[178]="&sup2;",r[179]="&sup3;",r[180]="&acute;",r[181]="&micro;",r[182]="&para;",r[183]="&middot;",r[184]="&cedil;",r[185]="&sup1;",r[186]="&ordm;",r[187]="&raquo;",r[188]="&frac14;",r[189]="&frac12;",r[190]="&frac34;",r[191]="&iquest;",r[192]="&Agrave;",r[193]="&Aacute;",r[194]="&Acirc;",r[195]="&Atilde;",r[196]="&Auml;",r[197]="&Aring;",r[198]="&AElig;",r[199]="&Ccedil;",r[200]="&Egrave;",r[201]="&Eacute;",r[202]="&Ecirc;",r[203]="&Euml;",r[204]="&Igrave;",r[205]="&Iacute;",r[206]="&Icirc;",r[207]="&Iuml;",r[208]="&ETH;",r[209]="&Ntilde;",r[210]="&Ograve;",r[211]="&Oacute;",r[212]="&Ocirc;",r[213]="&Otilde;",r[214]="&Ouml;",r[215]="&times;",r[216]="&Oslash;",r[217]="&Ugrave;",r[218]="&Uacute;",r[219]="&Ucirc;",r[220]="&Uuml;",r[221]="&Yacute;",r[222]="&THORN;",r[223]="&szlig;",r[224]="&agrave;",r[225]="&aacute;",r[226]="&acirc;",r[227]="&atilde;",r[228]="&auml;",r[229]="&aring;",r[230]="&aelig;",r[231]="&ccedil;",r[232]="&egrave;",r[233]="&eacute;",r[234]="&ecirc;",r[235]="&euml;",r[236]="&igrave;",r[237]="&iacute;",r[238]="&icirc;",r[239]="&iuml;",r[240]="&eth;",r[241]="&ntilde;",r[242]="&ograve;",r[243]="&oacute;",r[244]="&ocirc;",r[245]="&otilde;",r[246]="&ouml;",r[247]="&divide;",r[248]="&oslash;",r[249]="&ugrave;",r[250]="&uacute;",r[251]="&ucirc;",r[252]="&uuml;",r[253]="&yacute;",r[254]="&thorn;",r[255]="&yuml;"),"ENT_NOQUOTES"!==i&&(r[34]="&quot;"),"ENT_QUOTES"===i&&(r[39]="&#39;"),r[60]="&lt;",r[62]="&gt;";for(n in r)r.hasOwnProperty(n)&&(a[String.fromCharCode(n)]=r[n]);return a},e.htmlentities=function(e,t,n,r){var a=this.get_html_translation_table("HTML_ENTITIES",t),s="";if(e=null==e?"":e+"",!a)return!1;if(t&&"ENT_QUOTES"===t&&(a["'"]="&#039;"),r||null==r)for(s in a)a.hasOwnProperty(s)&&(e=e.split(s).join(a[s]));else e=e.replace(/([\s\S]*?)(&(?:#\d+|#x[\da-f]+|[a-zA-Z][\da-z]*);|$)/g,function(e,t,n){for(s in a)a.hasOwnProperty(s)&&(t=t.split(s).join(a[s]));return t+n});return e},e}"undefined"!=typeof n&&n.exports?n.exports=r:window.PHP_JS=r});})(window._SF_ ? _SF_.page : window.page);
;(function (page){ var define = page.define; var require = page.require; define("wiki-mobile-common:widget/lib/jsmart/jsmart.js",function(require,exports,module){function obMerge(e){for(var r=1;r<arguments.length;++r)for(var t in arguments[r])e[t]=arguments[r][t];return e}function countProperties(e){var r=0;for(var t in e)e.hasOwnProperty(t)&&r++;return r}function findInArray(e,r){if(Array.prototype.indexOf)return e.indexOf(r);for(var t=0;t<e.length;++t)if(e[t]===r)return t;return-1}function evalString(e){return e.replace(/\\t/,"	").replace(/\\n/,"\n").replace(/\\(['"\\])/g,"$1")}function trimQuotes(e){return evalString(e.replace(/^['"](.*)['"]$/,"$1")).replace(/^\s+|\s+$/g,"")}function findTag(e,r){for(var t=0,a=0,n=jSmart.prototype.left_delimiter,s=jSmart.prototype.right_delimiter,i=jSmart.prototype.auto_literal,o=/^\s*(.+)\s*$/i,p=e?new RegExp("^\\s*("+e+")\\s*$","i"):o,l=0;l<r.length;++l)if(r.substr(l,n.length)==n){if(i&&l+1<r.length&&r.substr(l+1,1).match(/\s/))continue;t||(r=r.slice(l),a+=parseInt(l),l=0),++t}else if(r.substr(l,s.length)==s){if(i&&l-1>=0&&r.substr(l-1,1).match(/\s/))continue;if(!--t){var c=r.slice(n.length,l).replace(/[\r\n]/g," "),u=c.match(p);if(u)return u.index=a,u[0]=r.slice(0,l+s.length),u}0>t&&(t=0)}return null}function findCloseTag(e,r,t){var a="",n=null,s=null,i=0;do{if(n&&(i+=n[0].length),n=findTag(e,t),!n)throw new Error("Unclosed {"+r+"}");a+=t.slice(0,n.index),i+=n.index,t=t.slice(n.index+n[0].length),s=findTag(r,a),s&&(a=a.slice(s.index+s[0].length))}while(s);return n.index=i,n}function findElseTag(e,r,t,a){for(var n=0,s=findTag(t,a);s;s=findTag(t,a)){var i=findTag(e,a);if(!i||i.index>s.index)return s.index+=n,s;a=a.slice(i.index+i[0].length),n+=i.index+i[0].length;var o=findCloseTag(r,e,a);a=a.slice(o.index+o[0].length),n+=o.index+o[0].length}return null}function execute(code,data){if("string"==typeof code)with({__code:code})with(modifiers)with(data)try{return eval(__code)}catch(e){throw new Error(e.message+" in \n"+code)}return code}function assignVar(e,r,t){e.match(/\[\]$/)?t[e.replace(/\[\]$/,"")].push(r):t[e]=r}function parse(e,r){for(var t=findTag("",e);t;t=findTag("",e)){t.index&&parseText(e.slice(0,t.index),r),e=e.slice(t.index+t[0].length);var a=t[1].match(/^\s*(\w+)(.*)$/);if(a){var n=a[1],s=a.length>2?a[2].replace(/^\s+|\s+$/g,""):"";if(n in buildInFunctions){var i=buildInFunctions[n],o=("parseParams"in i?i.parseParams:parseParams)(s);if("block"==i.type){e=e.replace(/^\n/,"");var p=findCloseTag("/"+n,n+" +[^}]*",e);i.parse(o,r,e.slice(0,p.index)),e=e.slice(p.index+p[0].length)}else i.parse(o,r),"extends"==n&&(r=[]);e=e.replace(/^\n/,"")}else if(n in plugins){var l=plugins[n];if("block"==l.type){var p=findCloseTag("/"+n,n+" +[^}]*",e);parsePluginBlock(n,parseParams(s),r,e.slice(0,p.index)),e=e.slice(p.index+p[0].length)}else"function"==l.type&&parsePluginFunc(n,parseParams(s),r);("append"==n||"assign"==n||"capture"==n||"eval"==n||"include"==n)&&(e=e.replace(/^\n/,""))}else buildInFunctions.expression.parse(t[1],r)}else{var c=buildInFunctions.expression.parse(t[1],r);"build-in"==c.type&&"operator"==c.name&&"="==c.op&&(e=e.replace(/^\n/,""))}}return e&&parseText(e,r),r}function parseText(e,r){if(parseText.parseEmbeddedVars)for(var t=/([$][\w@]+)|`([^`]*)`/,a=t.exec(e);a;a=t.exec(e))r.push({type:"text",data:e.slice(0,a.index)}),r.push(parseExpression(a[1]?a[1]:a[2]).tree),e=e.slice(a.index+a[0].length);return r.push({type:"text",data:e}),r}function parseFunc(e,r,t){return r.__parsed.name=parseText(e,[])[0],t.push({type:"plugin",name:"__func",params:r}),t}function parseOperator(e,r,t,a){a.push({type:"build-in",name:"operator",op:e,optype:r,precedence:t,params:{}})}function parseVar(e,r,t){for(var a=r.token,n=[{type:"text",data:t.replace(/^(\w+)@(key|index|iteration|first|last|show|total)/gi,"$1__$2")}],s=/^(?:\.|\s*->\s*|\[\s*)/,i=e.match(s);i;i=e.match(s)){r.token+=i[0],e=e.slice(i[0].length);var o={value:"",tree:[]};if(i[0].match(/\[/)){o=parseExpression(e),o&&(r.token+=o.value,n.push(o.tree),e=e.slice(o.value.length));var p=e.match(/\s*\]/);p&&(r.token+=p[0],e=e.slice(p[0].length))}else{var l=parseModifiers.stop;if(parseModifiers.stop=!0,lookUp(e,o)){r.token+=o.value;var c=o.tree[0];"plugin"==c.type&&"__func"==c.name&&(c.hasOwner=!0),n.push(c),e=e.slice(o.value.length)}else o=!1;parseModifiers.stop=l}o||n.push({type:"text",data:""})}return r.tree.push({type:"var",parts:n}),r.value+=r.token.substr(a.length),onParseVar(r.token),e}function onParseVar(){}function parseModifiers(e,r){if(!parseModifiers.stop){var t=e.match(/^\|(\w+)/);if(t){r.value+=t[0];var a="default"==t[1]?"defaultValue":t[1];e=e.slice(t[0].length).replace(/^\s+/,""),parseModifiers.stop=!0;for(var n=[],s=e.match(/^\s*:\s*/);s;s=e.match(/^\s*:\s*/)){r.value+=e.slice(0,s[0].length),e=e.slice(s[0].length);var i={value:"",tree:[]};lookUp(e,i)?(r.value+=i.value,n.push(i.tree[0]),e=e.slice(i.value.length)):parseText("",n)}parseModifiers.stop=!1,n.unshift(r.tree.pop()),r.tree.push(parseFunc(a,{__parsed:n},[])[0]),parseModifiers(e,r)}}}function lookUp(e,r){if(!e)return!1;if(e.substr(0,jSmart.prototype.left_delimiter.length)==jSmart.prototype.left_delimiter){var t=findTag("",e);if(t)return r.token=t[0],r.value+=t[0],parse(t[0],r.tree),parseModifiers(e.slice(r.value.length),r),!0}for(var a=0;a<tokens.length;++a)if(e.match(tokens[a].re))return r.token=RegExp.lastMatch,r.value+=RegExp.lastMatch,tokens[a].parse(r,e.slice(r.token.length)),!0;return!1}function bundleOp(e,r,t){var a=r[e];if("operator"==a.name&&a.precedence==t&&!a.params.__parsed){if("binary"==a.optype)return a.params.__parsed=[r[e-1],r[e+1]],r.splice(e-1,3,a),!0;if("post-unary"==a.optype)return a.params.__parsed=[r[e-1]],r.splice(e-1,2,a),!0;a.params.__parsed=[r[e+1]],r.splice(e,2,a)}return!1}function composeExpression(e){var r=0;for(r=0;r<e.length;++r)e[r]instanceof Array&&(e[r]=composeExpression(e[r]));for(var t=1;14>t;++t)if(2==t||10==t)for(r=e.length;r>0;--r)r-=bundleOp(r-1,e,t);else for(r=0;r<e.length;++r)r-=bundleOp(r,e,t);return e[0]}function parseExpression(e){for(var r={value:"",tree:[]};lookUp(e.slice(r.value.length),r););return r.tree.length?(r.tree=composeExpression(r.tree),r):!1}function parseParams(e,r,t){var a=e.replace(/\n/g," ").replace(/^\s+|\s+$/g,""),n=[];n.__parsed=[];var e="";if(!a)return n;for(r||(r=/^\s+/,t=/^(\w+)\s*=\s*/);a;){var s=null;if(t){var i=a.match(t);i&&(s=trimQuotes(i[1]),e+=a.slice(0,i[0].length),a=a.slice(i[0].length))}var o=parseExpression(a);if(!o)break;s?(n[s]=o.value,n.__parsed[s]=o.tree):(n.push(o.value),n.__parsed.push(o.tree)),e+=a.slice(0,o.value.length),a=a.slice(o.value.length);var p=a.match(r);if(!p)break;e+=a.slice(0,p[0].length),a=a.slice(p[0].length)}return n.toString=function(){return e},n}function parsePluginBlock(e,r,t,a){t.push({type:"plugin",name:e,params:r,subTree:parse(a,[])})}function parsePluginFunc(e,r,t){t.push({type:"plugin",name:e,params:r})}function getActualParamValues(e,r){var t=[];for(var a in e.__parsed)if(e.__parsed.hasOwnProperty(a)){var n=process([e.__parsed[a]],r);t[a]=n}return t.__get=function(e,r,a){if(e in t&&"undefined"!=typeof t[e])return t[e];if("undefined"!=typeof a&&"undefined"!=typeof t[a])return t[a];if(null===r)throw new Error("The required attribute '"+e+"' is missing");return r},t}function getVarValue(e,r,t){for(var a=r,n="",s=0;s<e.parts.length;++s){var i=e.parts[s];if("plugin"==i.type&&"__func"==i.name&&i.hasOwner)r.__owner=a,a=process([e.parts[s]],r),delete r.__owner;else if(n=process([i],r),n in r.smarty.section&&"text"==i.type&&"smarty"!=process([e.parts[0]],r)&&(n=r.smarty.section[n].index),!n&&"undefined"!=typeof t&&a instanceof Array&&(n=a.length),"undefined"!=typeof t&&s==e.parts.length-1&&(a[n]=t),"object"==typeof a&&null!==a&&n in a)a=a[n];else{if("undefined"==typeof t)return t;a[n]={},a=a[n]}}return a}function process(e,r){for(var t="",a=0;a<e.length;++a){var n="",s=e[a];if("text"==s.type)n=s.data;else if("var"==s.type)n=getVarValue(s,r);else if("build-in"==s.type)n=buildInFunctions[s.name].process(s,r);else if("plugin"==s.type){var i=plugins[s.name];if("block"==i.type){var o={value:!0};for(i.process(getActualParamValues(s.params,r),"",r,o);o.value;)o.value=!1,n+=i.process(getActualParamValues(s.params,r),process(s.subTree,r),r,o)}else"function"==i.type&&(n=i.process(getActualParamValues(s.params,r),r))}if("boolean"==typeof n&&(n=n?"1":""),1==e.length)return n;if(t+=n,r.smarty["continue"]||r.smarty["break"])return t}return t}function getTemplate(e,r,t){if(!t&&e in files)r=files[e];else{var a=jSmart.prototype.getTemplate(e);if("string"!=typeof a)throw new Error("No template for "+e);parse(applyFilters(jSmart.prototype.filters_global.pre,stripComments(a.replace(/\r\n/g,"\n"))),r),files[e]=r}return r}function stripComments(e){for(var r="",t=e.match(/{\*/);t;t=e.match(/{\*/)){r+=e.slice(0,t.index),e=e.slice(t.index+t[0].length);var a=e.match(/\*}/);if(!a)throw new Error("Unclosed {*");e=e.slice(a.index+a[0].length)}return r+e}function applyFilters(e,r){for(var t=0;t<e.length;++t)r=e[t](r);return r}var PHP_JS=require("wiki-mobile-common:widget/lib/jsmart/PHPJS.js"),buildInFunctions={expression:{parse:function(e,r){var t=parseExpression(e);return r.push({type:"build-in",name:"expression",expression:t.tree,params:parseParams(e.slice(t.value.length).replace(/^\s+|\s+$/g,""))}),t.tree},process:function(e,r){var t=getActualParamValues(e.params,r),a=process([e.expression],r);if(findInArray(t,"nofilter")<0){for(var n=0;n<default_modifiers.length;++n){var s=default_modifiers[n];s.params.__parsed[0]={type:"text",data:a},a=process([s],r)}escape_html&&(a=modifiers.escape(a)),a=applyFilters(varFilters,a),tpl_modifiers.length&&(__t=function(){return a},a=process(tpl_modifiers,r))}return a}},operator:{process:function(e,r){var t=getActualParamValues(e.params,r),a=t[0];if("binary"!=e.optype){if("!"==e.op)return!a;var n="var"==e.params.__parsed[0].type;n&&(a=getVarValue(e.params.__parsed[0],r));var s=a;if("pre-unary"==e.optype){switch(e.op){case"-":s=-a;break;case"++":s=++a;break;case"--":s=--a}n&&getVarValue(e.params.__parsed[0],r,a)}else{switch(e.op){case"++":a++;break;case"--":a--}getVarValue(e.params.__parsed[0],r,a)}return s}var i=t[1];if("="==e.op)return getVarValue(e.params.__parsed[0],r,i),"";if(e.op.match(/(\+=|-=|\*=|\/=|%=)/)){switch(a=getVarValue(e.params.__parsed[0],r),e.op){case"+=":a+=i;break;case"-=":a-=i;break;case"*=":a*=i;break;case"/=":a/=i;break;case"%=":a%=i}return getVarValue(e.params.__parsed[0],r,a)}if(e.op.match(/div/))return"div"!=e.op^a%i==0;if(e.op.match(/even/))return"even"!=e.op^a/i%2==0;if(e.op.match(/xor/))return(a||i)&&!(a&&i);switch(e.op){case"==":return a==i;case"!=":return a!=i;case"+":return parseInt(a,10)+parseInt(i,10);case"-":return parseInt(a,10)-parseInt(i,10);case"*":return parseInt(a,10)*parseInt(i,10);case"/":return parseInt(a,10)/parseInt(i,10);case"%":return parseInt(a,10)%parseInt(i,10);case"&&":return a&&i;case"||":return a||i;case"<":return i>a;case"<=":return i>=a;case">":return a>i;case">=":return a>=i;case"===":return a===i;case"!==":return a!==i}}},section:{type:"block",parse:function(e,r,t){var a=[],n=[];r.push({type:"build-in",name:"section",params:e,subTree:a,subTreeElse:n});var s=findElseTag("section [^}]+","/section","sectionelse",t);s?(parse(t.slice(0,s.index),a),parse(t.slice(s.index+s[0].length).replace(/^[\r\n]/,""),n)):parse(t,a)},process:function(e,r){var t=getActualParamValues(e.params,r),a={};r.smarty.section[t.__get("name",null,0)]=a;var n=t.__get("show",!0);if(a.show=n,!n)return process(e.subTreeElse,r);var s=parseInt(t.__get("start",0)),i=t.loop instanceof Object?countProperties(t.loop):isNaN(t.loop)?0:parseInt(t.loop),o=parseInt(t.__get("step",1)),p=parseInt(t.__get("max"));isNaN(p)&&(p=Number.MAX_VALUE),0>s?(s+=i,0>s&&(s=0)):s>=i&&(s=i?i-1:0);for(var l=0,c=0,u=s;u>=0&&i>u&&p>l;u+=o,++l)c=u;a.total=l,a.loop=l,l=0;var m="";for(u=s;u>=0&&i>u&&p>l&&!r.smarty["break"];u+=o,++l)a.first=u==s,a.last=0>u+o||u+o>=i,a.index=u,a.index_prev=u-o,a.index_next=u+o,a.iteration=a.rownum=l+1,m+=process(e.subTree,r),r.smarty["continue"]=!1;return r.smarty["break"]=!1,l?m:process(e.subTreeElse,r)}},setfilter:{type:"block",parseParams:function(e){return[parseExpression("__t()|"+e).tree]},parse:function(e,r,t){r.push({type:"build-in",name:"setfilter",params:e,subTree:parse(t,[])})},process:function(e,r){tpl_modifiers=e.params;var t=process(e.subTree,r);return tpl_modifiers=[],t}},"for":{type:"block",parseParams:function(e){var r=e.match(/^\s*\$(\w+)\s*=\s*([^\s]+)\s*to\s*([^\s]+)\s*(?:step\s*([^\s]+))?\s*(.*)$/);if(!r)throw new Error("Invalid {for} parameters: "+e);return parseParams("varName='"+r[1]+"' from="+r[2]+" to="+r[3]+" step="+(r[4]?r[4]:"1")+" "+r[5])},parse:function(e,r,t){var a=[],n=[];r.push({type:"build-in",name:"for",params:e,subTree:a,subTreeElse:n});var s=findElseTag("for\\s[^}]+","/for","forelse",t);s?(parse(t.slice(0,s.index),a),parse(t.slice(s.index+s[0].length),n)):parse(t,a)},process:function(e,r){var t=getActualParamValues(e.params,r),a=parseInt(t.__get("from")),n=parseInt(t.__get("to")),s=parseInt(t.__get("step"));isNaN(s)&&(s=1);var i=parseInt(t.__get("max"));isNaN(i)&&(i=Number.MAX_VALUE);for(var o=0,p="",l=Math.min(Math.ceil(((s>0?n-a:a-n)+1)/Math.abs(s)),i),c=parseInt(t.from);l>o&&!r.smarty["break"];c+=s,++o)r[t.varName]=c,p+=process(e.subTree,r),r.smarty["continue"]=!1;return r.smarty["break"]=!1,o||(p=process(e.subTreeElse,r)),p}},"if":{type:"block",parse:function(e,r,t){var a=[],n=[];r.push({type:"build-in",name:"if",params:e,subTreeIf:a,subTreeElse:n});var s=findElseTag("if\\s+[^}]+","/if","else[^}]*",t);if(s){parse(t.slice(0,s.index),a),t=t.slice(s.index+s[0].length);var i=s[1].match(/^else\s*if(.*)/);i?buildInFunctions["if"].parse(parseParams(i[1]),n,t.replace(/^\n/,"")):parse(t.replace(/^\n/,""),n)}else parse(t,a)},process:function(e,r){return getActualParamValues(e.params,r)[0]?process(e.subTreeIf,r):process(e.subTreeElse,r)}},foreach:{type:"block",parseParams:function(e){var r=e.match(/^\s*([$].+)\s*as\s*[$](\w+)\s*(=>\s*[$](\w+))?\s*$/i);return r&&(e="from="+r[1]+" item="+(r[4]||r[2]),r[4]&&(e+=" key="+r[2])),parseParams(e)},parse:function(e,r,t){var a=[],n=[];r.push({type:"build-in",name:"foreach",params:e,subTree:a,subTreeElse:n});var s=findElseTag("foreach\\s[^}]+","/foreach","foreachelse",t);s?(parse(t.slice(0,s.index),a),parse(t.slice(s.index+s[0].length).replace(/^[\r\n]/,""),n)):parse(t,a)},process:function(e,r){var t=getActualParamValues(e.params,r),a=t.from;if(void 0==a)return"";a instanceof Object||(a=[a]);var n=countProperties(a);r[t.item+"__total"]=n,"name"in t&&(r.smarty.foreach[t.name]={},r.smarty.foreach[t.name].total=n);var s="",i=0;for(var o in a)if(a.hasOwnProperty(o)){if(r.smarty["break"])break;r[t.item+"__key"]=isNaN(o)?o:parseInt(o),"key"in t&&(r[t.key]=r[t.item+"__key"]),r[t.item]=a[o],r[t.item+"__index"]=parseInt(i),r[t.item+"__iteration"]=parseInt(i+1),r[t.item+"__first"]=0===i,r[t.item+"__last"]=i==n-1,"name"in t&&(r.smarty.foreach[t.name].index=parseInt(i),r.smarty.foreach[t.name].iteration=parseInt(i+1),r.smarty.foreach[t.name].first=0===i?1:"",r.smarty.foreach[t.name].last=i==n-1?1:""),++i,s+=process(e.subTree,r),r.smarty["continue"]=!1}return r.smarty["break"]=!1,r[t.item+"__show"]=i>0,t.name&&(r.smarty.foreach[t.name].show=i>0?1:""),i>0?s:process(e.subTreeElse,r)}},"function":{type:"block",parse:function(e,r,t){var a=[];plugins[trimQuotes(e.name?e.name:e[0])]={type:"function",subTree:a,defautParams:e,process:function(e,r){var t=getActualParamValues(this.defautParams,r);return delete t.name,process(this.subTree,obMerge({},r,t,e))}},parse(t,a)}},php:{type:"block",parse:function(){}},"extends":{type:"function",parse:function(e,r){r.splice(0,r.length),getTemplate(trimQuotes(e.file?e.file:e[0]),r)}},block:{type:"block",parse:function(e,r,t){r.push({type:"build-in",name:"block",params:e}),e.append=findInArray(e,"append")>=0,e.prepend=findInArray(e,"prepend")>=0,e.hide=findInArray(e,"hide")>=0,e.hasChild=e.hasParent=!1,onParseVar=function(r){r.match(/^\s*[$]smarty.block.child\s*$/)&&(e.hasChild=!0),r.match(/^\s*[$]smarty.block.parent\s*$/)&&(e.hasParent=!0)};var r=parse(t,[]);onParseVar=function(){};var a=trimQuotes(e.name?e.name:e[0]);a in blocks||(blocks[a]=[]),blocks[a].push({tree:r,params:e})},process:function(e,r){r.smarty.block.parent=r.smarty.block.child="";var t=trimQuotes(e.params.name?e.params.name:e.params[0]);return this.processBlocks(blocks[t],blocks[t].length-1,r),r.smarty.block.child},processBlocks:function(e,r,t){if(!r&&e[r].params.hide)return void(t.smarty.block.child="");for(var a=!0,n=!1;r>=0;--r){if(e[r].params.hasParent){var s=t.smarty.block.child;t.smarty.block.child="",this.processBlocks(e,r-1,t),t.smarty.block.parent=t.smarty.block.child,t.smarty.block.child=s}var s=t.smarty.block.child,i=process(e[r].tree,t);t.smarty.block.child=s,e[r].params.hasChild?t.smarty.block.child=i:a?t.smarty.block.child=i+t.smarty.block.child:n&&(t.smarty.block.child+=i),a=e[r].params.append,n=e[r].params.prepend}}},strip:{type:"block",parse:function(e,r,t){parse(t.replace(/[ \t]*[\r\n]+[ \t]*/g,""),r)}},literal:{type:"block",parse:function(e,r,t){parseText(t,r)}},ldelim:{type:"function",parse:function(e,r){parseText(jSmart.prototype.left_delimiter,r)}},rdelim:{type:"function",parse:function(e,r){parseText(jSmart.prototype.right_delimiter,r)}},"while":{type:"block",parse:function(e,r,t){r.push({type:"build-in",name:"while",params:e,subTree:parse(t,[])})},process:function(e,r){for(var t="";getActualParamValues(e.params,r)[0]&&!r.smarty["break"];)t+=process(e.subTree,r),r.smarty["continue"]=!1;return r.smarty["break"]=!1,t}}},plugins={},modifiers={},files={},blocks=null,scripts=null,tpl_modifiers=[],tokens=[{re:/^\$([\w@]+)/,parse:function(e,r){parseModifiers(parseVar(r,e,RegExp.$1),e)}},{re:/^(true|false)/i,parse:function(e){parseText(e.token.match(/true/i)?"1":"",e.tree)}},{re:/^'([^'\\]*(?:\\.[^'\\]*)*)'/,parse:function(e,r){parseText(evalString(RegExp.$1),e.tree),parseModifiers(r,e)}},{re:/^"([^"\\]*(?:\\.[^"\\]*)*)"/,parse:function(e,r){var t=evalString(RegExp.$1),a=t.match(tokens[0].re);if(a){var n={token:a[0],tree:[]};if(parseVar(t,n,a[1]),n.token.length==t.length)return void e.tree.push(n.tree[0])}parseText.parseEmbeddedVars=!0,e.tree.push({type:"plugin",name:"__quoted",params:{__parsed:parse(t,[])}}),parseText.parseEmbeddedVars=!1,parseModifiers(r,e)}},{re:/^(\w+)\s*[(]([)]?)/,parse:function(e,r){var t=RegExp.$1,a=RegExp.$2,n=parseParams(a?"":r,/^\s*,\s*/);parseFunc(t,n,e.tree),e.value+=n.toString(),parseModifiers(r.slice(n.toString().length),e)}},{re:/^\s*\(\s*/,parse:function(e){var r=[];e.tree.push(r),r.parent=e.tree,e.tree=r}},{re:/^\s*\)\s*/,parse:function(e){e.tree.parent&&(e.tree=e.tree.parent)}},{re:/^\s*(\+\+|--)\s*/,parse:function(e){e.tree.length&&"var"==e.tree[e.tree.length-1].type?parseOperator(RegExp.$1,"post-unary",1,e.tree):parseOperator(RegExp.$1,"pre-unary",1,e.tree)}},{re:/^\s*(===|!==|==|!=)\s*/,parse:function(e){parseOperator(RegExp.$1,"binary",6,e.tree)}},{re:/^\s+(eq|ne|neq)\s+/i,parse:function(e){var r=RegExp.$1.replace(/ne(q)?/,"!=").replace(/eq/,"==");parseOperator(r,"binary",6,e.tree)}},{re:/^\s*!\s*/,parse:function(e){parseOperator("!","pre-unary",2,e.tree)}},{re:/^\s+not\s+/i,parse:function(e){parseOperator("!","pre-unary",2,e.tree)}},{re:/^\s*(=|\+=|-=|\*=|\/=|%=)\s*/,parse:function(e){parseOperator(RegExp.$1,"binary",10,e.tree)}},{re:/^\s*(\*|\/|%)\s*/,parse:function(e){parseOperator(RegExp.$1,"binary",3,e.tree)}},{re:/^\s+mod\s+/i,parse:function(e){parseOperator("%","binary",3,e.tree)}},{re:/^\s*(\+|-)\s*/,parse:function(e){e.tree.length&&"operator"!=e.tree[e.tree.length-1].name?parseOperator(RegExp.$1,"binary",4,e.tree):parseOperator(RegExp.$1,"pre-unary",4,e.tree)}},{re:/^\s*(<=|>=|<>|<|>)\s*/,parse:function(e){parseOperator(RegExp.$1.replace(/<>/,"!="),"binary",5,e.tree)}},{re:/^\s+(lt|lte|le|gt|gte|ge)\s+/i,parse:function(e){var r=RegExp.$1.replace(/lt/,"<").replace(/l(t)?e/,"<=").replace(/gt/,">").replace(/g(t)?e/,">=");parseOperator(r,"binary",5,e.tree)}},{re:/^\s+(is\s+(not\s+)?div\s+by)\s+/i,parse:function(e){parseOperator(RegExp.$2?"div_not":"div","binary",7,e.tree)}},{re:/^\s+is\s+(not\s+)?(even|odd)(\s+by\s+)?\s*/i,parse:function(e){var r=RegExp.$1?"odd"==RegExp.$2?"even":"even_not":"odd"==RegExp.$2?"even_not":"even";parseOperator(r,"binary",7,e.tree),RegExp.$3||parseText("1",e.tree)}},{re:/^\s*(&&)\s*/,parse:function(e){parseOperator(RegExp.$1,"binary",8,e.tree)}},{re:/^\s*(\|\|)\s*/,parse:function(e){parseOperator(RegExp.$1,"binary",9,e.tree)}},{re:/^\s+and\s+/i,parse:function(e){parseOperator("&&","binary",11,e.tree)}},{re:/^\s+xor\s+/i,parse:function(e){parseOperator("xor","binary",12,e.tree)}},{re:/^\s+or\s+/i,parse:function(e){parseOperator("||","binary",13,e.tree)}},{re:/^#(\w+)#/,parse:function(e,r){var t={token:"$smarty",tree:[]};parseVar(".config."+RegExp.$1,t,"smarty"),e.tree.push(t.tree[0]),parseModifiers(r,e)}},{re:/^\s*\[\s*/,parse:function(e,r){var t=parseParams(r,/^\s*,\s*/,/^('[^'\\]*(?:\\.[^'\\]*)*'|"[^"\\]*(?:\\.[^"\\]*)*"|\w+)\s*=>\s*/);parsePluginFunc("__array",t,e.tree),e.value+=t.toString();var a=r.slice(t.toString().length).match(/\s*\]/);a&&(e.value+=a[0])}},{re:/^[\d.]+/,parse:function(e,r){e.token=e.token.indexOf(".")>-1?parseFloat(e.token):parseInt(e.token,10),parseText(e.token,e.tree),parseModifiers(r,e)}},{re:/^\w+/,parse:function(e,r){parseText(e.token,e.tree),parseModifiers(r,e)}}],jSmart=function(e){this.tree=[],this.tree.blocks={},this.scripts={},this.default_modifiers=[],this.filters={variable:[],post:[]},this.smarty={smarty:{block:{},"break":!1,capture:{},"continue":!1,counter:{},cycle:{},foreach:{},section:{},now:Math.floor((new Date).getTime()/1e3),"const":{},config:{},current_dir:"/",template:"",ldelim:jSmart.prototype.left_delimiter,rdelim:jSmart.prototype.right_delimiter,version:"2.13.1"}},blocks=this.tree.blocks,parse(applyFilters(jSmart.prototype.filters_global.pre,stripComments(new String(e?e:"").replace(/\|f_escape_\w+/g,"").replace(/\r\n/g,"\n"))),this.tree)};jSmart.prototype.fetch=function(e){blocks=this.tree.blocks,scripts=this.scripts,escape_html=this.escape_html,default_modifiers=jSmart.prototype.default_modifiers_global.concat(this.default_modifiers),this.data=obMerge("object"==typeof e?e:{},this.smarty),varFilters=jSmart.prototype.filters_global.variable.concat(this.filters.variable);var r=process(this.tree,this.data);return jSmart.prototype.debugging&&plugins.debug.process([],this.data),applyFilters(jSmart.prototype.filters_global.post.concat(this.filters.post),r)},jSmart.prototype.escape_html=!1,jSmart.prototype.registerPlugin=function(e,r,t){"modifier"==e?modifiers[r]=t:plugins[r]={type:e,process:t}},jSmart.prototype.registerFilter=function(e,r){(this.tree?this.filters:jSmart.prototype.filters_global)["output"==e?"post":e].push(r)},jSmart.prototype.filters_global={pre:[],variable:[],post:[]},jSmart.prototype.configLoad=function(e,r,t){t=t?t:this.data;for(var a=e.replace(/\r\n/g,"\n").replace(/^\s+|\s+$/g,""),n=/^\s*(?:\[([^\]]+)\]|(?:(\w+)[ \t]*=[ \t]*("""|'[^'\\\n]*(?:\\.[^'\\\n]*)*'|"[^"\\\n]*(?:\\.[^"\\\n]*)*"|[^\n]*)))/m,s="",i=a.match(n);i;i=a.match(n)){if(a=a.slice(i.index+i[0].length),i[1])s=i[1];else if((!s||s==r)&&"."!=s.substr(0,1))if('"""'==i[3]){var o=a.match(/"""/);o&&(t.smarty.config[i[2]]=a.slice(0,o.index),a=a.slice(o.index+o[0].length))}else t.smarty.config[i[2]]=trimQuotes(i[3]);var p=a.match(/\n+/);if(!p)break;a=a.slice(p.index+p[0].length)}},jSmart.prototype.clearConfig=function(e){e?delete this.data.smarty.config[e]:this.data.smarty.config={}},jSmart.prototype.addDefaultModifier=function(e){e instanceof Array||(e=[e]);for(var r=0;r<e.length;++r){var t={value:"",tree:[0]};parseModifiers("|"+e[r],t),(this.tree?this.default_modifiers:this.default_modifiers_global).push(t.tree[0])}},jSmart.prototype.default_modifiers_global=[],jSmart.prototype.getTemplate=function(e){return __inline(e)},jSmart.prototype.getFile=function(e){return __inline(e)},jSmart.prototype.getJavascript=function(e){return __inline(e)},jSmart.prototype.getConfig=function(e){return __inline(e)},jSmart.prototype.auto_literal=!0,jSmart.prototype.left_delimiter="{%",jSmart.prototype.right_delimiter="%}",jSmart.prototype.debugging=!1,jSmart.prototype.PHPJS=function(fnm,modifier){if("function"==eval("typeof "+fnm))return"object"==typeof window?window:global;if("function"==typeof PHP_JS)return new PHP_JS;throw new Error("Modifier '"+modifier+"' uses JavaScript port of PHP function '"+fnm+"'. You can find one at http://phpjs.org")},jSmart.prototype.makeTimeStamp=function(e){if(!e)return Math.floor((new Date).getTime()/1e3);if(isNaN(e)){var r=jSmart.prototype.PHPJS("strtotime","date_format").strtotime(e);return-1==r||r===!1?Math.floor((new Date).getTime()/1e3):r}return e=new String(e),14==e.length?Math.floor(new Date(e.substr(0,4),e.substr(4,2)-1,e.substr(6,2),e.substr(8,2),e.substr(10,2)).getTime()/1e3):parseInt(e)},jSmart.prototype.registerPlugin("function","__array",function(e){var r=[];for(var t in e)e.hasOwnProperty(t)&&e[t]&&"function"!=typeof e[t]&&(r[t]=e[t]);return r}),jSmart.prototype.registerPlugin("function","__func",function(e,r){for(var t=[],a={},n=0;n<e.length;++n)t.push(e.name+"__p"+n),a[e.name+"__p"+n]=e[n];var s="__owner"in r&&e.name in r.__owner?"__owner."+e.name:e.name;return execute(s+"("+t.join(",")+")",obMerge({},r,a))}),jSmart.prototype.registerPlugin("function","__quoted",function(e){return e.join("")}),jSmart.prototype.registerPlugin("function","append",function(e,r){var t=e.__get("var",null,0);t in r&&r[t]instanceof Array||(r[t]=[]);var a=e.__get("index",!1),n=e.__get("value",null,1);return a===!1?r[t].push(n):r[t][a]=n,""}),jSmart.prototype.registerPlugin("function","assign",function(e,r){return assignVar(e.__get("var",null,0),e.__get("value",null,1),r),""}),jSmart.prototype.registerPlugin("function","break",function(e,r){return r.smarty["break"]=!0,""}),jSmart.prototype.registerPlugin("function","call",function(e,r){var t=e.__get("name",null,0);delete e.name;var a=e.__get("assign",!1);delete e.assign;var n=plugins[t].process(e,r);return a?(assignVar(a,n,r),""):n}),jSmart.prototype.registerPlugin("block","capture",function(e,r,t){if(r){r=r.replace(/^\n/,""),t.smarty.capture[e.__get("name","default",0)]=r,"assign"in e&&assignVar(e.assign,r,t);var a=e.__get("append",!1);a&&(a in t?t[a]instanceof Array&&t[a].push(r):t[a]=[r])}return""}),jSmart.prototype.registerPlugin("function","continue",function(e,r){return r.smarty["continue"]=!0,""}),jSmart.prototype.registerPlugin("function","counter",function(e,r){var t=e.__get("name","default");if(t in r.smarty.counter){var a=r.smarty.counter[t];"start"in e?a.value=parseInt(e.start):(a.value=parseInt(a.value),a.skip=parseInt(a.skip),"down"==a.direction?a.value-=a.skip:a.value+=a.skip),a.skip=e.__get("skip",a.skip),a.direction=e.__get("direction",a.direction),a.assign=e.__get("assign",a.assign)}else r.smarty.counter[t]={value:parseInt(e.__get("start",1)),skip:parseInt(e.__get("skip",1)),direction:e.__get("direction","up"),assign:e.__get("assign",!1)};return r.smarty.counter[t].assign?(r[r.smarty.counter[t].assign]=r.smarty.counter[t].value,""):e.__get("print",!0)?r.smarty.counter[t].value:""}),jSmart.prototype.registerPlugin("function","cycle",function(e,r){var t=e.__get("name","default"),a=e.__get("reset",!1);t in r.smarty.cycle||(r.smarty.cycle[t]={arr:[""],delimiter:e.__get("delimiter",","),index:0},a=!0),e.__get("delimiter",!1)&&(r.smarty.cycle[t].delimiter=e.delimiter);var n=e.__get("values",!1);if(n){var s=[];if(n instanceof Object)for(nm in n)s.push(n[nm]);else s=n.split(r.smarty.cycle[t].delimiter);(s.length!=r.smarty.cycle[t].arr.length||s[0]!=r.smarty.cycle[t].arr[0])&&(r.smarty.cycle[t].arr=s,r.smarty.cycle[t].index=0,a=!0)}return e.__get("advance","true")&&(r.smarty.cycle[t].index+=1),(r.smarty.cycle[t].index>=r.smarty.cycle[t].arr.length||a)&&(r.smarty.cycle[t].index=0),e.__get("assign",!1)?(assignVar(e.assign,r.smarty.cycle[t].arr[r.smarty.cycle[t].index],r),""):e.__get("print",!0)?r.smarty.cycle[t].arr[r.smarty.cycle[t].index]:""}),jSmart.prototype.print_r=function(e,r){if(e instanceof Object){var t=(e instanceof Array?"Array["+e.length+"]":"Object")+"<br>";for(var a in e)e.hasOwnProperty(a)&&(t+=r+"&nbsp;&nbsp;<strong>"+a+"</strong> : "+jSmart.prototype.print_r(e[a],r+"&nbsp;&nbsp;&nbsp;")+"<br>");return t}return e},jSmart.prototype.registerPlugin("function","debug",function(e,r){"undefined"!=typeof dbgWnd&&dbgWnd.close(),dbgWnd=window.open("","","width=680,height=600,resizable,scrollbars=yes");var t="",a=0;for(var n in r)t+="<tr class="+(++a%2?"odd":"even")+"><td><strong>"+n+"</strong></td><td>"+jSmart.prototype.print_r(r[n],"")+"</td></tr>";return dbgWnd.document.write("                <html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en'>                <head>                 <title>jSmart Debug Console</title>                   <style type='text/css'>                      table {width: 100%;}                      td {vertical-align:top;width: 50%;}                      .even td {background-color: #fafafa;}                   </style>                </head>                <body>                   <h1>jSmart Debug Console</h1>                   <h2>assigned template variables</h2>                   <table>"+t+"</table>                </body>                </html>             "),""}),jSmart.prototype.registerPlugin("function","eval",function(e,r){var t=[];parse(e.__get("var","",0),t);var a=process(t,r);return"assign"in e?(assignVar(e.assign,a,r),""):a}),jSmart.prototype.registerPlugin("function","fetch",function(e,r){var t=jSmart.prototype.getFile(e.__get("file",null,0));return"assign"in e?(assignVar(e.assign,t,r),""):t}),jSmart.prototype.registerPlugin("function","html_checkboxes",function(e,r){var t,a,n,s=e.__get("type","checkbox"),i=e.__get("name",s),o=e.__get("name",s),p=e.__get("values",e.options),l=e.__get("options",[]),c="options"in e,u=e.__get("selected",!1),m=e.__get("separator",""),g=Boolean(e.__get("labels",!0)),f=Boolean(e.__get("label_ids",!1)),d=[],h=0,y="";if("checkbox"==s&&(i+="[]"),!c)for(t in e.output)l.push(e.output[t]);for(t in p)p.hasOwnProperty(t)&&(a=c?t:p[t],n=o+"_"+a,y=g?f?'<label for="'+n+'">':"<label>":"",y+='<input type="'+s+'" name="'+i+'" value="'+a+'" ',f&&(y+='id="'+n+'" '),u==(c?t:p[t])&&(y+='checked="checked" '),y+="/>"+l[c?t:h++],y+=g?"</label>":"",y+=m,d.push(y));return"assign"in e?(assignVar(e.assign,d,r),""):d.join("\n")}),jSmart.prototype.registerPlugin("function","html_image",function(e){var r,t=e.__get("file",null),a=e.__get("width",!1),n=e.__get("height",!1),s=e.__get("alt",""),i=e.__get("href",e.__get("link",!1)),o=e.__get("path_prefix",""),p={file:1,width:1,height:1,alt:1,href:1,basedir:1,path_prefix:1,link:1},l='<img src="'+o+t+'" alt="'+s+'"'+(a?' width="'+a+'"':"")+(n?' height="'+n+'"':"");for(r in e)e.hasOwnProperty(r)&&"string"==typeof e[r]&&(r in p||(l+=" "+r+'="'+e[r]+'"'));return l+=" />",i?'<a href="'+i+'">'+l+"</a>":l}),jSmart.prototype.registerPlugin("function","html_options",function(e){var r,t=e.__get("values",e.options),a=e.__get("options",[]),n="options"in e;if(!n)for(r in e.output)a.push(e.output[r]);var s=e.__get("selected",!1),i=[],o="",p=0;for(r in t)t.hasOwnProperty(r)&&(o='<option value="'+(n?r:t[r])+'"',s==(n?r:t[r])&&(o+=' selected="selected"'),o+=">"+a[n?r:p++]+"</option>",i.push(o));var l=e.__get("name",!1);return(l?'<select name="'+l+'">\n'+i.join("\n")+"\n</select>":i.join("\n"))+"\n"}),jSmart.prototype.registerPlugin("function","html_radios",function(e,r){return e.type="radio",plugins.html_checkboxes.process(e,r)}),jSmart.prototype.registerPlugin("function","html_select_date",function(e){var r=e.__get("prefix","Date_"),t=["January","February","March","April","May","June","July","August","September","October","November","December"],a="";a+='<select name="'+r+'Month">\n';var n=0;for(n=0;n<t.length;++n)a+='<option value="'+n+'">'+t[n]+"</option>\n";for(a+="</select>\n",a+='<select name="'+r+'Day">\n',n=0;31>n;++n)a+='<option value="'+n+'">'+n+"</option>\n";return a+="</select>\n"
}),jSmart.prototype.registerPlugin("function","html_table",function(e){var r,t=[];if(e.loop instanceof Array)t=e.loop;else for(r in e.loop)e.loop.hasOwnProperty(r)&&t.push(e.loop[r]);var a=e.__get("rows",!1),n=e.__get("cols",!1);n||(n=a?Math.ceil(t.length/a):3);var s=[];if(isNaN(n)){if("object"==typeof n)for(r in n)n.hasOwnProperty(r)&&s.push(n[r]);else s=n.split(/\s*,\s*/);n=s.length}a=a?a:Math.ceil(t.length/n);var i=e.__get("inner","cols"),o=e.__get("caption",""),p=e.__get("table_attr",'border="1"'),l=e.__get("th_attr",!1);l&&"object"!=typeof l&&(l=[l]);var c=e.__get("tr_attr",!1);c&&"object"!=typeof c&&(c=[c]);var u=e.__get("td_attr",!1);u&&"object"!=typeof u&&(u=[u]);for(var m=e.__get("trailpad","&nbsp;"),g=e.__get("hdir","right"),f=e.__get("vdir","down"),d="",h=0;a>h;++h){d+="<tr"+(c?" "+c[h%c.length]:"")+">\n";for(var y=0;n>y;++y){var _="cols"==i?("down"==f?h:a-1-h)*n+("right"==g?y:n-1-y):("right"==g?y:n-1-y)*a+("down"==f?h:a-1-h);d+="<td"+(u?" "+u[y%u.length]:"")+">"+(_<t.length?t[_]:m)+"</td>\n"}d+="</tr>\n"}var b="";if(s.length){b="\n<thead><tr>";for(var v=0;v<s.length;++v)b+="\n<th"+(l?" "+l[v%l.length]:"")+">"+s["right"==g?v:s.length-1-v]+"</th>";b+="\n</tr></thead>"}return"<table "+p+">"+(o?"\n<caption>"+o+"</caption>":"")+b+"\n<tbody>\n"+d+"</tbody>\n</table>\n"}),jSmart.prototype.registerPlugin("function","include",function(e,r){var t=e.__get("file",null,0),a=obMerge({},r,e);a.smarty.template=t;var n=process(getTemplate(t,[],findInArray(e,"nocache")>=0),a);return"assign"in e?(assignVar(e.assign,n,r),""):n}),jSmart.prototype.registerPlugin("function","include_javascript",function(e,r){var t=e.__get("file",null,0);if(e.__get("once",!0)&&t in scripts)return"";scripts[t]=!0;var a=execute(jSmart.prototype.getJavascript(t),{$this:r});return"assign"in e?(assignVar(e.assign,a,r),""):a}),jSmart.prototype.registerPlugin("function","include_php",function(e,r){return plugins.include_javascript.process(e,r)}),jSmart.prototype.registerPlugin("function","insert",function(params,data){var fparams={};for(var nm in params)params.hasOwnProperty(nm)&&isNaN(nm)&&params[nm]&&"string"==typeof params[nm]&&"name"!=nm&&"assign"!=nm&&"script"!=nm&&(fparams[nm]=params[nm]);var prefix="insert_";"script"in params&&(eval(jSmart.prototype.getJavascript(params.script)),prefix="smarty_insert_");var func=eval(prefix+params.__get("name",null,0)),s=func(fparams,data);return"assign"in params?(assignVar(params.assign,s,data),""):s}),jSmart.prototype.registerPlugin("block","javascript",function(e,r,t){return t.$this=t,execute(r,t),delete t.$this,""}),jSmart.prototype.registerPlugin("function","config_load",function(e,r){return jSmart.prototype.configLoad(jSmart.prototype.getConfig(e.__get("file",null,0)),e.__get("section","",1),r),""}),jSmart.prototype.registerPlugin("function","mailto",function(e){var r=e.__get("address",null),t=e.__get("encode","none"),a=e.__get("text",r),n=jSmart.prototype.PHPJS("rawurlencode","mailto").rawurlencode(e.__get("cc","")).replace("%40","@"),i=jSmart.prototype.PHPJS("rawurlencode","mailto").rawurlencode(e.__get("bcc","")).replace("%40","@"),o=jSmart.prototype.PHPJS("rawurlencode","mailto").rawurlencode(e.__get("followupto","")).replace("%40","@"),p=jSmart.prototype.PHPJS("rawurlencode","mailto").rawurlencode(e.__get("subject","")),l=jSmart.prototype.PHPJS("rawurlencode","mailto").rawurlencode(e.__get("newsgroups","")),c=e.__get("extra","");if(r+=n?"?cc="+n:"",r+=i?(n?"&":"?")+"bcc="+i:"",r+=p?(n||i?"&":"?")+"subject="+p:"",r+=l?(n||i||p?"&":"?")+"newsgroups="+l:"",r+=o?(n||i||p||l?"&":"?")+"followupto="+o:"",s='<a href="mailto:'+r+'" '+c+">"+a+"</a>","javascript"==t){s="document.write('"+s+"');";for(var u="",m=0;m<s.length;++m)u+="%"+jSmart.prototype.PHPJS("bin2hex","mailto").bin2hex(s.substr(m,1));return'<script type="text/javascript">eval(unescape(\''+u+"'))</script>"}if("javascript_charcode"==t){for(var g=[],m=0;m<s.length;++m)g.push(jSmart.prototype.PHPJS("ord","mailto").ord(s.substr(m,1)));return'<script type="text/javascript" language="javascript">\n<!--\n{document.write(String.fromCharCode('+g.join(",")+"))}\n//-->\n</script>\n"}if("hex"==t){if(r.match(/^.+\?.+$/))throw new Error("mailto: hex encoding does not work with extra attributes. Try javascript.");for(var f="",m=0;m<r.length;++m)f+=r.substr(m,1).match(/\w/)?"%"+jSmart.prototype.PHPJS("bin2hex","mailto").bin2hex(r.substr(m,1)):r.substr(m,1);for(var d="",m=0;m<a.length;++m)d+="&#x"+jSmart.prototype.PHPJS("bin2hex","mailto").bin2hex(a.substr(m,1))+";";return'<a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;'+f+'" '+c+">"+d+"</a>"}return s}),jSmart.prototype.registerPlugin("function","math",function(params,data){with(Math)with(params)var res=eval(params.__get("equation",null).replace(/pi\(\s*\)/g,"PI"));return"format"in params&&(res=jSmart.prototype.PHPJS("sprintf","math").sprintf(params.format,res)),"assign"in params?(assignVar(params.assign,res,data),""):res}),jSmart.prototype.registerPlugin("block","nocache",function(e,r){return r}),jSmart.prototype.registerPlugin("block","textformat",function(e,r,t){if(!r)return"";var a=e.__get("wrap",80),n=e.__get("wrap_char","\n"),s=e.__get("wrap_cut",!1),i=e.__get("indent_char"," "),o=e.__get("indent",0),p=new Array(o+1).join(i),l=e.__get("indent_first",0),c=new Array(l+1).join(i),u=e.__get("style","");"email"==u&&(a=72);for(var m=r.split(/[\r\n]{2}/),g=0;g<m.length;++g){var f=m[g];f&&(f=f.replace(/^\s+|\s+$/,"").replace(/\s+/g," "),l>0&&(f=c+f),f=modifiers.wordwrap(f,a-o,n,s),o>0&&(f=f.replace(/^/gm,p)),m[g]=f)}var d=m.join(n+n);return"assign"in e?(assignVar(e.assign,d,t),""):d}),jSmart.prototype.registerPlugin("modifier","capitalize",function(e,r){var t=new RegExp(r?"[\\W\\d]+":"\\W+"),a=null,n="";for(a=e.match(t);a;a=e.match(t)){var s=e.slice(0,a.index);n+=s.match(/\d/)?s:s.charAt(0).toUpperCase()+s.slice(1),n+=e.slice(a.index,a.index+a[0].length),e=e.slice(a.index+a[0].length)}return e.match(/\d/)?n+e:n+e.charAt(0).toUpperCase()+e.slice(1)}),jSmart.prototype.registerPlugin("modifier","cat",function(e,r){return r=r?r:"",e+r}),jSmart.prototype.registerPlugin("modifier","count",function(e,r){if(null===e||"undefined"==typeof e)return 0;if(e.constructor!==Array&&e.constructor!==Object)return 1;r=Boolean(r);var t,a=0;for(t in e)e.hasOwnProperty(t)&&(a++,r&&e[t]&&(e[t].constructor===Array||e[t].constructor===Object)&&(a+=modifiers.count(e[t],!0)));return a}),jSmart.prototype.registerPlugin("modifier","count_characters",function(e,r){return r?e.length:e.replace(/\s/g,"").length}),jSmart.prototype.registerPlugin("modifier","count_paragraphs",function(e){var r=e.match(/\n+/g);return r?r.length+1:1}),jSmart.prototype.registerPlugin("modifier","count_sentences",function(e){var r=e.match(/[^\s]\.(?!\w)/g);return r?r.length:0}),jSmart.prototype.registerPlugin("modifier","count_words",function(e){var r=e.match(/\w+/g);return r?r.length:0}),jSmart.prototype.registerPlugin("modifier","date_format",function(e,r,t){return jSmart.prototype.PHPJS("strftime","date_format").strftime(r?r:"%b %e, %Y",jSmart.prototype.makeTimeStamp(e?e:t))}),jSmart.prototype.registerPlugin("modifier","defaultValue",function(e,r){return void 0==e||""===e||"array"==typeof e&&0==e.length?void 0==r||""===r||"array"==typeof r&&0==e.length?"":r.toString():e.toString()}),jSmart.prototype.registerPlugin("modifier","unescape",function(e,r,t){switch(e=new String(e),r=r||"html",t=t||"UTF-8",r){case"html":return e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#039;/g,"'").replace(/&quot;/g,'"');case"entity":case"htmlall":return jSmart.prototype.PHPJS("html_entity_decode","unescape").html_entity_decode(e,t);case"url":return jSmart.prototype.PHPJS("rawurldecode","unescape").rawurldecode(e)}return e}),jSmart.prototype.registerPlugin("modifier","escape",function(e,r,t,a){switch(e=new String(e),r=r||"html",t=t||"UTF-8",a="undefined"!=typeof a?Boolean(a):!0,r){case"html":return a&&(e=e.replace(/&/g,"&amp;")),e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;");case"htmlall":return jSmart.prototype.PHPJS("htmlentities","escape").htmlentities(e,3,t);case"url":return jSmart.prototype.PHPJS("rawurlencode","escape").rawurlencode(e);case"urlpathinfo":return jSmart.prototype.PHPJS("rawurlencode","escape").rawurlencode(e).replace(/%2F/g,"/");case"quotes":return e.replace(/(^|[^\\])'/g,"$1\\'");case"hex":for(var n="",s=0;s<e.length;++s)n+="%"+jSmart.prototype.PHPJS("bin2hex","escape").bin2hex(e.substr(s,1));return n;case"hexentity":for(var n="",s=0;s<e.length;++s)n+="&#x"+jSmart.prototype.PHPJS("bin2hex","escape").bin2hex(e.substr(s,1)).toUpperCase()+";";return n;case"decentity":for(var n="",s=0;s<e.length;++s)n+="&#"+jSmart.prototype.PHPJS("ord","escape").ord(e.substr(s,1))+";";return n;case"mail":return e.replace(/@/g," [AT] ").replace(/[.]/g," [DOT] ");case"nonstd":for(var n="",s=0;s<e.length;++s){var i=jSmart.prototype.PHPJS("ord","escape").ord(e.substr(s,1));n+=i>=126?"&#"+i+";":e.substr(s,1)}return n;case"javascript":return e.replace(/\\/g,"\\\\").replace(/'/g,"\\'").replace(/"/g,'\\"').replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/<\//g,"</");case"none":return e}return e}),jSmart.prototype.registerPlugin("modifier","indent",function(e,r,t){r=r?r:4,t=t?t:" ";for(var a="";r--;)a+=t;var n=e.match(/\n+$/);return a+e.replace(/\n+$/,"").replace(/\n/g,"\n"+a)+(n?n[0]:"")}),jSmart.prototype.registerPlugin("modifier","lower",function(e){return e.toLowerCase()}),jSmart.prototype.registerPlugin("modifier","nl2br",function(e){return e.replace(/\n/g,"<br />\n")}),jSmart.prototype.registerPlugin("modifier","regex_replace",function(e,r,t){var a=r.match(/^ *\/(.*)\/(.*) *$/);return new String(e).replace(new RegExp(a[1],"g"+(a.length>1?a[2]:"")),t)}),jSmart.prototype.registerPlugin("modifier","replace",function(e,r,t){if(!r)return e;e=new String(e),r=new String(r),t=new String(t);var a="",n=-1;for(n=e.indexOf(r);n>=0;n=e.indexOf(r))a+=e.slice(0,n)+t,n+=r.length,e=e.slice(n);return a+e}),jSmart.prototype.registerPlugin("modifier","spacify",function(e,r){return r||(r=" "),e.replace(/(\n|.)(?!$)/g,"$1"+r)}),jSmart.prototype.registerPlugin("modifier","noprint",function(){return""}),jSmart.prototype.registerPlugin("modifier","string_format",function(e,r){return jSmart.prototype.PHPJS("sprintf","string_format").sprintf(r,e)}),jSmart.prototype.registerPlugin("modifier","strip",function(e,r){return r=r?r:" ",new String(e).replace(/[\s]+/g,r)}),jSmart.prototype.registerPlugin("modifier","strip_tags",function(e,r){return r=null==r?!0:r,new String(e).replace(/<[^>]*?>/g,r?" ":"")}),jSmart.prototype.registerPlugin("modifier","truncate",function(e,r,t,a,n){return r=r?r:80,t=null!=t?t:"...",e.length<=r?e:(r-=Math.min(r,t.length),n?e.slice(0,Math.floor(r/2))+t+e.slice(e.length-Math.floor(r/2)):(a||(e=e.slice(0,r+1).replace(/\s+?(\S+)?$/,"")),e.slice(0,r)+t))}),jSmart.prototype.registerPlugin("modifier","upper",function(e){return e.toUpperCase()}),jSmart.prototype.registerPlugin("modifier","wordwrap",function(e,r,t,a){r=r||80,t=t||"\n";for(var n=e.split("\n"),s=0;s<n.length;++s){for(var i=n[s],o="";i.length>r;){for(var p=0,l=i.slice(p).match(/\s+/);l&&p+l.index<=r;l=i.slice(p).match(/\s+/))p+=l.index+l[0].length;p=p||(a?r:l?l.index+l[0].length:i.length),o+=i.slice(0,p).replace(/\s+$/,""),p<i.length&&(o+=t),i=i.slice(p)}n[s]=o+i}return n.join("\n")}),String.prototype.fetch=function(e){var r=new jSmart(this);return r.fetch(e)},jSmart.prototype.PHPJS=PHP_JS,jSmart.prototype.baiekDebug=jSmart.prototype.baiekDebug||function(e){if(!jSmart.prototype.debugging)return!1;switch(e=e||""){case"modifier":console&&console.log(modifiers);break;case"function":case"block":case"":case"all":var r={},t={};for(var a in plugins)"function"===plugins[a].type?r[a]=plugins[a].process:"block"===plugins[a].type&&(t[a]=plugins[a].process);""===e||"all"===e?console&&console.log({modifiers:modifiers,functions:r,blocks:t}):"function"===e?console&&console.log(r):"block"===e&&console&&console.log(t);break;default:console&&console.error("jsmartbaikeDebug[modifier|function|block|all]")}},jSmart.prototype.registerPlugin("modifier","wiki_common_https_trans",function(e){if("https:"===window.location.protocol){var r={"http://baike.baidu.com":"https://baike.baidu.com","http://wapbaike.baidu.com":"https://wapbaike.baidu.com","http://baike.bdimg.com":"https://bkssl.bdimg.com","http://baikebcs.bdimg.com":"https://baikebcs.bdimg.com","http://hiphotos.baidu.com":"https://imgsa.baidu.com","http://imgsrc.baidu.com":"https://imgsa.baidu.com","http://a.hiphotos.baidu.com":"https://imgsa.baidu.com","http://b.hiphotos.baidu.com":"https://imgsa.baidu.com","http://c.hiphotos.baidu.com":"https://imgsa.baidu.com","http://d.hiphotos.baidu.com":"https://imgsa.baidu.com","http://e.hiphotos.baidu.com":"https://imgsa.baidu.com","http://f.hiphotos.baidu.com":"https://imgsa.baidu.com","http://g.hiphotos.baidu.com":"https://imgsa.baidu.com","http://h.hiphotos.baidu.com":"https://imgsa.baidu.com","http://cdn00.baidu-img.cn":"https://timg01.bdimg.com","http://m.baidu.com":"https://m.baidu.com","http://drm.media.baidubce.com":"https://drm.media.baidubce.com","http://bs.baidu.com":"https://baikebcs.bdimg.com","http://passport.baidu.com":"https://passport.baidu.com","http://wappass.baidu.com":"https://wappass.baidu.com","http://jsapi.qq.com":"https://jsapi.qq.com","http://img.baidu.com":"https://gss0.baidu.com/70cFsjip0QIZ8tyhnq","http://himg.baidu.com":"https://gss0.baidu.com/7Ls0a8Sm2Q5IlBGlnYG","http://himg.bdimg.com":"https://gss0.bdstatic.com/7Ls0a8Sm1A5BphGlnYG","http://tts.baidu.com":"https://gss0.baidu.com/6KAZsjip0QIZ8tyhnq","http://zhangmenshiting.baidu.com":"https://gss0.baidu.com/yrwHcj7d1QgTmNK7m9_UKT6zgBYnreHg-_","http://nssug.baidu.com":"https://gsp0.baidu.com/8qUZeT8a2gU2pMbgoY3K","http://msg.baidu.com":"https://gsp0.baidu.com/8_UFsjip0QIZ8tyhnq","http://static.tieba.baidu.com":"https://gsp0.baidu.com/5aAHeD3nKhI2p27j8IqW0jdnxx1xbK"};e=e.replace(/http:\/\/[^\/]+/,function(e){return r[e]?r[e]:e})}return e}),"undefined"!=typeof module&&module.exports?module.exports=jSmart:window.jSmart=jSmart});})(window._SF_ ? _SF_.page : window.page);